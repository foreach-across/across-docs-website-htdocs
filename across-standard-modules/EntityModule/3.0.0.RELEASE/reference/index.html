<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>EntityModule</title>
<link rel="stylesheet" href="stylesheets/across.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="stylesheets/coderay-asciidoctor.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>EntityModule</h1>
<div class="details">
<span id="revnumber">version 3.0.0.RELEASE</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#about">About</a></li>
<li><a href="#what-s-new-in-this-version">What&#8217;s new in this version?</a>
<ul class="sectlevel1">
<li><a href="#3-0-0-release">3.0.0.RELEASE</a></li>
<li><a href="#2-2-0-release">2.2.0.RELEASE</a></li>
<li><a href="#2-1-0-release">2.1.0.RELEASE</a></li>
<li><a href="#2-0-0-release">2.0.0.RELEASE</a></li>
</ul>
</li>
<li><a href="#general-information">General information</a>
<ul class="sectlevel1">
<li><a href="#module-artifact">Artifact</a></li>
<li><a href="#module-dependencies">Module dependencies</a></li>
<li><a href="#module-settings">Module settings</a></li>
</ul>
</li>
<li><a href="#how-entitymodule-works">How EntityModule works</a>
<ul class="sectlevel1">
<li><a href="#entity-views">1. Entity views</a>
<ul class="sectlevel2">
<li><a href="#default-views">1.1. Default views</a></li>
<li><a href="#list-view">1.2. List view</a></li>
<li><a href="#form-view">1.3. Form view</a></li>
<li><a href="#delete-view">1.4. Delete view</a></li>
<li><a href="#generic-view">1.5. custom views</a></li>
<li><a href="#entitylinkbuilder">1.6. EntityLinkBuilder</a></li>
</ul>
</li>
<li><a href="#entity-associations">2. Entity associations</a>
<ul class="sectlevel2">
<li><a href="#association-type">2.1. Association type</a></li>
<li><a href="#parentdeletemode">2.2. ParentDeleteMode</a></li>
<li><a href="#association-naming-and-location">2.3. Association naming and location</a></li>
<li><a href="#customize-associated-entity-creation">2.4. Customize associated entity creation</a></li>
</ul>
</li>
<li><a href="#integration-with-other-modules">3. Integration with other modules</a>
<ul class="sectlevel3">
<li><a href="#integration-adminwebmodule">3.1. AdminWebModule</a></li>
<li><a href="#adminwebmodule-developer-tools">3.2. AdminWebModule: developer tools</a></li>
<li><a href="#auditable">3.3. Auditable</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#customizing-generated-entity-views">Customizing generated Entity views</a>
<ul class="sectlevel2">
<li><a href="#view-builder-initializer">1.1. Customizing the EntityViewFactoryBuilderInitializer</a></li>
<li><a href="#changing-entity-names-property-names-or-other-labels">1.2. Changing entity names, property names or other labels</a></li>
<li><a href="#customize-page-layout">1.3. Setting page title or changing page layout</a></li>
<li><a href="#specifying-a-custom-template">1.4. Specifying a custom template</a></li>
<li><a href="#entityviewprocessor">1.5. EntityViewProcessor</a></li>
<li><a href="#using-a-custom-entityviewfactory">1.6. Using a custom EntityViewFactory</a></li>
<li><a href="#selecting-properties">1.7. Selecting properties</a></li>
<li><a href="#configuring-property-view-types">1.8. Configuring property view types</a></li>
<li><a href="#fieldset-properties">1.9. Fieldset properties</a></li>
<li><a href="#customizing-entity-validation">1.10. Customizing entity validation</a></li>
<li><a href="#customizing-strong-value-strong-mode-elements">1.11. Customizing <strong>VALUE</strong> mode elements</a></li>
<li><a href="#customizing-textbox-elements">1.12. Customizing textbox elements</a></li>
<li><a href="#customizing-numeric-elements">1.13. Customizing numeric elements</a></li>
<li><a href="#customizing-datetime-picker-elements">1.14. Customizing datetime picker elements</a></li>
<li><a href="#customizing-selectable-options">1.15. Customizing selectable options</a></li>
</ul>
</li>
<li><a href="#configuring-entity-types">Configuring entity types</a>
<ul class="sectlevel2">
<li><a href="#builders">1.1. Using builders</a></li>
<li><a href="#configuring-properties">1.2. Configuring properties</a></li>
<li><a href="#creating-an-entityconfiguration-manually">1.3. Creating an EntityConfiguration manually</a></li>
<li><a href="#automatic-registration-of-entity-types">1.4. Automatic registration of entity types</a></li>
</ul>
</li>
<li><a href="#entity-query-infrastructure">EntityQuery infrastructure</a>
<ul class="sectlevel1">
<li><a href="#entity-query-executor">1. EntityQueryExecutor</a>
<ul class="sectlevel2">
<li><a href="#associatedentityqueryexecutor">1.1. AssociatedEntityQueryExecutor</a></li>
</ul>
</li>
<li><a href="#entity-query-language-eql">2. EntityQuery Language (EQL)</a>
<ul class="sectlevel2">
<li><a href="#supported-operators">2.1. Supported operators</a></li>
<li><a href="#default-eql-functions">2.2. Default EQL functions</a></li>
<li><a href="#entityqueryparser">2.3. EntityQueryParser</a></li>
</ul>
</li>
<li><a href="#entity-query-filtering-on-list-view">3. EntityQuery filtering on list view</a>
<ul class="sectlevel2">
<li><a href="#basic-mode">3.1. Basic mode</a></li>
<li><a href="#advanced-mode">3.2. Advanced mode</a></li>
</ul>
</li>
<li><a href="#eql-predicate-on-list-view">4. EQL predicate on list view</a></li>
<li><a href="#extending-eql">5. Extending EQL</a>
<ul class="sectlevel2">
<li><a href="#custom-value-conversion">5.1. Custom value conversion</a></li>
<li><a href="#adding-custom-functions">5.2. Adding custom functions</a></li>
<li><a href="#custom-eql-translation">5.3. Custom EQL translation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#appendix">Appendix</a>
<ul class="sectlevel1">
<li><a href="#appendix-attributes-overview">1. Attributes overview</a></li>
<li><a href="#appendix-message-codes">2. Message codes</a></li>
<li><a href="#appendix-view-processors">3. Default EntityViewProcessors</a></li>
</ul>
</li>
<li><a href="#how-tos">How-tos</a>
<ul class="sectlevel1">
<li><a href="#adding-a-custom-property-to-an-entity">1. Adding a custom property to an entity</a></li>
<li><a href="#customizing-the-listview-of-an-entity">2. Customizing the listview of an entity</a></li>
<li><a href="#howto-extension-form">3. Creating an extension form</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="openblock copyright">
<div class="content">
<div class="paragraph">
<p>Copyright &#169; 2014-2018<br>
<span class="small">Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically.</span></p>
</div>
</div>
</div>
<h6 id="authors" class="discrete">Authors</h6>
<div class="paragraph">
<p>Arne Vandamme, Steven Gentens</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="about"><a class="anchor" href="#about"></a>About</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The EntityModule is responsible for automatically generating an administration UI of entities built.
It provides infrastructure to define an entity model and to generate default web pages based on that model.
By default all Spring Data repositories are introspected and corresponding entity models are built for every repository.</p>
</div>
<div class="paragraph">
<p>Module website: <a href="https://across.foreach.be/modules/entitymodule" class="bare">https://across.foreach.be/modules/entitymodule</a></p>
</div>
</div>
</div>
<h1 id="what-s-new-in-this-version" class="sect0"><a class="anchor" href="#what-s-new-in-this-version"></a>What&#8217;s new in this version?</h1>
<div class="sect1">
<h2 id="3-0-0-release"><a class="anchor" href="#3-0-0-release"></a>3.0.0.RELEASE</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>the module dependencies for EntityModule have been optimized for re-use</p>
<div class="ulist">
<ul>
<li>
<p>as a result EntityModule no longer transitively pulls in BootstrapUiModule or AdminWebModule</p>
</li>
<li>
<p>when used without BootstrapUiModule, no default <code>ViewElement</code> rendering infrastructure will be available</p>
</li>
<li>
<p>when used with BootstrapUiModule but without AdminWebModule, the default views for an entity will never get created and view support (<code>EntityViewFactory</code>) will be disabled</p>
</li>
</ul>
</div>
</li>
<li>
<p>added support for <code>LocalDate</code>, <code>LocalTime</code> and <code>LocalDateTime</code> to be rendered using <code>DateTimeFormElement</code></p>
</li>
<li>
<p>it is now possible to configure default view element modes (eg. control or readonly rendering) on an <code>EntityConfiguration</code></p>
<div class="ulist">
<ul>
<li>
<p>these will be used in all cases where no specific configuration has been configured on property level</p>
</li>
</ul>
</div>
</li>
<li>
<p>configuration &amp; view builders support <code>AttributeRegistrar</code> for registering or removing attributes</p>
<div class="ulist">
<ul>
<li>
<p>using <code>AttributeRegistrar</code> is useful if you want to use the owner of the attribute collection (eg. the <code>EntityConfiguration</code>)</p>
</li>
<li>
<p>common default registrars can be found in the <code>EntityAttributeRegistrars</code> utility class</p>
</li>
</ul>
</div>
</li>
<li>
<p>entity views can now have a <a href="#appendix-entity-view-factory-attributes">collection of configuration attributes</a></p>
<div class="ulist">
<ul>
<li>
<p>attributes can be used to influence or extend default behaviour, new attributes are available for permission checking and admin menu rendering</p>
</li>
<li>
<p>during view rendering attributes are accessible (and can be modified) using <code>EntityViewRequest.getConfigurationAttributes()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>improvements to view configuration</p>
<div class="ulist">
<ul>
<li>
<p><code>EntityViewFactoryAttributes.ADMIN_MENU</code> attribute can be used to specify if a view should have an admin menu item added</p>
</li>
<li>
<p><code>EntityViewFactoryAttributes.ACCESS_VALIDATOR</code> attribute can be used to determine how access to the view should be validated</p>
</li>
</ul>
</div>
</li>
<li>
<p>added an <code>ExtensionViewProcessorAdapter</code> base class for easily creating a view for a custom extension class (see <a href="#howto-extension-form">how-to</a>)</p>
</li>
<li>
<p>added <code>EntityViewCustomizers</code> utility class providing some helpers for customizing <code>EntityViewFactoryBuilder</code> in a chainable fashion</p>
</li>
<li>
<p>EntityModule no longer creates its own <code>Validator</code> instance, the <code>registerForMvc</code> related settings have been removed</p>
<div class="ulist">
<ul>
<li>
<p>the validator used by EntityModule is the default MVC validator</p>
</li>
</ul>
</div>
</li>
<li>
<p>it&#8217;s now possible to <a href="#customizing-message-code-prefix">define a different message code prefix</a> for module entities using properties</p>
</li>
<li>
<p>you can now force the required status of a control by setting the <code>EntityAttributes.REQUIRED_PROPERTY</code> attribute to <code>true</code> or <code>false</code> on an <code>EntityPropertyDescriptor</code></p>
</li>
<li>
<p>message codes for form groups and fieldsets have been extended, apart from <code>[description]</code>, there is now also built-in support for <code>[help]</code> and <code>[tooltip]</code></p>
<div class="ulist">
<ul>
<li>
<p>this constitutes a minor breaking change in that <code>[description]</code> content is now always rendered above the control of a form group.
Previously this could be different depending on the type of control inside the form group.</p>
</li>
<li>
<p>see the section <a href="#configuring-form-text">configuring form controls text</a> for a full explanation of the new message codes</p>
</li>
</ul>
</div>
</li>
<li>
<p>the behaviour of when controls are prefixed with <code>entity.</code> has been changed</p>
<div class="ulist">
<ul>
<li>
<p>when using <code>EntityViewCommand</code> all property controls of the base entity will should be prefixed with <code>entity.</code> in order to map on the <code>EntityViewCommand.entity</code> values</p>
</li>
<li>
<p>previously this was done always when an <code>EntityViewCommand</code> was found on the <code>ViewElementBuilderContext</code></p>
</li>
<li>
<p>in the new version this is only done if there is also an attribute <code>EntityPropertyControlNamePostProcessor.PREFIX_CONTROL_NAMES</code> explicitly set to <code>true</code> on the builder context</p>
<div class="ulist">
<ul>
<li>
<p>the latter is done automatically by the <code>PropertyRenderingViewProcessor</code> when building the initial controls</p>
</li>
</ul>
</div>
</li>
<li>
<p>though not intentionally breaking, this change can have side effects with controls no longer being prefixed, developers are encouraged to test the custom forms they have</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-2-0-release"><a class="anchor" href="#2-2-0-release"></a>2.2.0.RELEASE</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>added <a href="#appendix-message-codes">message codes</a> for admin menu items</p>
<div class="ulist">
<ul>
<li>
<p>of the entity management section</p>
</li>
<li>
<p>of a group of entities (defaults to the module name)</p>
</li>
<li>
<p>of a single entity type</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#entity-query-language-eql">EntityQuery Language</a> allows specifying an order by clause or a <code>Sort</code> specifier</p>
</li>
<li>
<p><code>OptionIterableBuilder</code> can return a sorted specification by implementing the <code>isSorted()</code> method</p>
<div class="ulist">
<ul>
<li>
<p>if the <code>OptionGenerator</code> has no explicit sorting parameter set, it now only sorts if the configured <code>OptionIterableBuilder</code> is not sorted</p>
</li>
<li>
<p>if you specify option values using an EQL statement, the sort specifier of your <code>EntityQuery</code> will be taken into account</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#entity-query-filtering-on-list-view">EntityQuery filtering</a> now supports a basic and advanced mode to support the use of configured property filters and the use of eql statements</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-1-0-release"><a class="anchor" href="#2-1-0-release"></a>2.1.0.RELEASE</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>improve the ability to <a href="#customizing-generated-entity-views">customize page titles and layouts</a></p>
<div class="ulist">
<ul>
<li>
<p>all entity views now set a page \(sub\) title if a matching message code returns a non-empty string</p>
<div class="ulist">
<ul>
<li>
<p>there is a default title for all views except the list view</p>
</li>
</ul>
</div>
</li>
<li>
<p>list views now also publish an <code>EntityPageStructureRenderedEvent</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>select option controls now support <code>SelectFormElementConfiguration</code> to render more advanced bootstrap-select controls</p>
</li>
<li>
<p>added <em>ILIKE</em> operator to the <a href="#entity-query-language-eql">EntityQuery Language</a> for case insensitive matching on String columns</p>
<div class="ulist">
<ul>
<li>
<p>an <code>EntityQueryConditionTranslator</code> attribute can be registered on entity properties to ensure regular equal and like lookups are always converted to the case insensitive equivalent</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-0-release"><a class="anchor" href="#2-0-0-release"></a>2.0.0.RELEASE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This release has a lot of breaking changes compared with the previous release.
The code has been heavily rewritten and optimized.
The public API modified accordingly with a focus on simplification and future extensibility.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>requires Across 2.0.0+</p>
</li>
<li>
<p>massive overhaul of the <code>EntitiesConfigurationBuilder</code> system - removed the <code>and()</code> concatenating of builder calls</p>
</li>
<li>
<p>massive overhaul of <code>EntityViewFactory</code>, <code>EntityViewProcessor</code> and the default administration controllers</p>
<div class="ulist">
<ul>
<li>
<p>nested builder consumers are used instead - this greatly simplified the class hierarchy involved</p>
</li>
<li>
<p>externalized the entire <code>ViewElement</code> infrastructure to BootstrapUiModule</p>
</li>
<li>
<p>if BootstrapUiModule is not present, default views will not be created</p>
</li>
</ul>
</div>
</li>
<li>
<p>compatibility update with Spring 4.2 which replaces <code>CrudInvoker</code> with <code>RepositoryInvoker</code> from spring-data-commons.</p>
</li>
<li>
<p>principal names on <code>Auditable</code> entities are now pretty printed using the <code>SecurityPrincipalLabelResolverStrategy</code> from the <em>SpringSecurityModule</em></p>
</li>
<li>
<p>EntityModule now supports deleting of entities</p>
</li>
<li>
<p>the <code>EntityModel</code> of an <code>EntityConfiguration</code> can now be customized using the <code>EntityConfigurer</code> builders</p>
</li>
<li>
<p>extension of the <a href="#entity-query-infrastructure">EntityQuery infrastructure</a></p>
<div class="ulist">
<ul>
<li>
<p>addition of the EntityQuery Language \(EQL\) providing SQL-like syntax for building an <code>EntityQuery</code></p>
</li>
<li>
<p>provide a default EQL-based filter for list views</p>
</li>
</ul>
</div>
</li>
<li>
<p>addition of the entity browser in the <em>Developer tools</em> section of AdminWebModule</p>
<div class="ulist">
<ul>
<li>
<p>allows seeing all registered entities along with their attributes, properties, views and associations</p>
</li>
<li>
<p>the entity browser is only activate if development mode is active</p>
</li>
</ul>
</div>
</li>
<li>
<p>streamlined the message code hierarchy for view rendering, see <a href="#appendix-message-codes">appendix for details</a></p>
</li>
<li>
<p>a list view can now have a default predicate assigned using an EQL statement</p>
<div class="ulist">
<ul>
<li>
<p>this can be used to ensure a list result always has a default filter applied</p>
</li>
</ul>
</div>
</li>
<li>
<p>default entity views support transactions, allowing multiple processors to modify data in a single transaction</p>
<div class="ulist">
<ul>
<li>
<p>transactions are enabled by default for state modifying HTTP methods of all form views \(create, update, delete and custom form views\)</p>
</li>
</ul>
</div>
</li>
<li>
<p>option controls \(select, multi-checkbox\) can be easily customized through a number of attributes</p>
<div class="ulist">
<ul>
<li>
<p>making it easier to specify the option values that can be selected</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<h1 id="general-information" class="sect0"><a class="anchor" href="#general-information"></a>General information</h1>
<div class="sect1">
<h2 id="module-artifact"><a class="anchor" href="#module-artifact"></a>Artifact</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;dependencies&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>com.foreach.across.modules<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>entity-module<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>{entity-module-version}<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="module-dependencies"><a class="anchor" href="#module-dependencies"></a>Module dependencies</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Module</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AdminWebModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables generating and customizing forms (views) for managing the registered entities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BootstrapUiModule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Activates support for default Bootstrap based <code>ViewElement</code> creation and rendering.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="module-settings"><a class="anchor" href="#module-settings"></a>Module settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EntityModule supports the following configuration properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties"># Customize the message code prefix that should be used for entity messages
# for all entities from that module
entityModule.message-codes[MODULE_NAME] = PREFIX</code></pre>
</div>
</div>
</div>
</div>
<h1 id="how-entitymodule-works" class="sect0"><a class="anchor" href="#how-entitymodule-works"></a>How EntityModule works</h1>
<div class="sect1">
<h2 id="entity-views"><a class="anchor" href="#entity-views"></a>1. Entity views</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EntityModule has the ability to generate automatic views for entities.
When AdminWebModule is present, automatic CRUD pages for entities will be generated using these views.</p>
</div>
<div class="paragraph">
<p>A view is an abstraction of web controller that allows you to take advantage of the EntityModule configuration system.
Usually views are a rendering of one or more entities of a particular entity type.</p>
</div>
<div class="paragraph">
<p>Both <code>EntityConfiguration</code> and <code>EntityAssociation</code> can have their own views defined.
They do so by implementing the <code>EntityViewRegistry</code> interface.
Every view has a unique name within an <code>EntityViewRegistry</code>.</p>
</div>
<div class="sect2">
<h3 id="default-views"><a class="anchor" href="#default-views"></a>1.1. Default views</h3>
<div class="paragraph">
<p>By default CRUD views will be created for every <code>EntityConfiguration</code> with a <code>CrudRepository</code> or an <code>EntityQueryExecutor</code> registered.
Likewise CRUD views will be created for every <code>EntityAssociation</code> with an <code>AssociatedEntityQueryExecutor</code> attribute.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Query executor attributes should be registered automatically in most cases.
So you usually don&#8217;t need to worry about those.
See the <a href="#entity-query-executor">chapter on <code>EntityQueryExecutor</code></a> for more information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following default views will be created for an entity type:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">View name</th>
<th class="tableblock halign-left valign-top">View type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listView
(<code>EntityView.LIST_VIEW_NAME</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shows the list of entities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">createView
(<code>EntityView.CREATE_VIEW_NAME</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">form view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders and executes the form for creating a new entity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">updateView
(<code>EntityView.UPDATE_VIEW_NAME</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">form view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders and executes the form for updating an entity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deleteView
(<code>EntityView.DELETE_VIEW_NAME</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">form view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shows the confirmation page and performs the delete if allowed.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The default views all render markup using the <code>ViewElement</code> infrastructure and the implementations provided by the BootstrapUiModule.</p>
</div>
<div class="sect3">
<h4 id="how-entity-views-work"><a class="anchor" href="#how-entity-views-work"></a>1.1.1. How entity views work</h4>
<div class="paragraph">
<p>An <code>EntityView</code> is created by an <code>EntityViewFactory</code> based on an <code>EntityViewRequest</code>.
A controller is still responsible for executing (usually rendering) the actual <code>EntityView</code>.</p>
</div>
<div class="paragraph">
<p>The <code>GenericEntityViewController</code> is responsible for loading and rendering all default views in the AdminWebModule UI.</p>
</div>
<div class="paragraph">
<p>The path of the web request to <code>GenericEntityViewController</code> will determine:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the name of the view that should be rendered</p>
</li>
<li>
<p>which <code>EntityViewRegistry</code> will be used for loading the view (<code>EntityConfiguration</code> or <code>EntityAssociation</code>)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can force the view being rendered by simply providing the view name as a request parameter with key <strong>view</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The controller creates an <code>EntityViewRequest</code>, retrieves the <code>EntityViewFactory</code> and builds the corresponding <code>EntityViewContext</code> and <code>EntityViewCommand</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="entityviewrequest"><a class="anchor" href="#entityviewrequest"></a>1.1.2. EntityViewRequest</h4>
<div class="paragraph">
<p>Wraps together all the information of a specific entity view request:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the web request that is creating the view</p>
</li>
<li>
<p>the contextual information of the entity being viewed (represented by the <code>EntityViewContext</code>)</p>
</li>
<li>
<p>the command that should be executed on the <code>EntityViewFactory</code> (represented by the <code>EntityViewCommand</code>)</p>
</li>
<li>
<p>the name of the view being requested and the <code>EntityViewFactory</code> being used</p>
</li>
<li>
<p>the <code>PageContentStructure</code> of the page being rendered (if applicable)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please refer to the <a href="https://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/request/EntityViewRequest.html"><code>EntityViewRequest</code> javadoc</a> for a description of all available properties.</p>
</div>
</div>
<div class="sect3">
<h4 id="entityviewcontext"><a class="anchor" href="#entityviewcontext"></a>1.1.3. EntityViewContext</h4>
<div class="paragraph">
<p>The <code>EntityViewContext</code> contains contextual information and provides access to components that should be used for building a view.
Contextual information is for example the entity type, specific entity or entity association being viewed.
Components are things like the <code>EntityLinkBuilder</code>, <code>EntityMessages</code> or <code>AllowableActions</code></p>
</div>
<div class="paragraph">
<p>Please refer to the <a href="https://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/context/EntityViewContext.html"><code>EntityViewContext</code> javadoc</a> for a description of all available properties.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>EntityViewContext</code> is available as a request-scoped bean but only in case of a request passing through the <code>GenericEntityViewController</code> will the data be loaded.
Loading the <code>EntityViewContext</code> attributes manually  can be done by using the <code>EntityViewContextLoader</code> bean.
You should use the <code>ConfigurableEntityViewContext</code> interface to modify a view context.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="entityviewcommand"><a class="anchor" href="#entityviewcommand"></a>1.1.4. EntityViewCommand</h4>
<div class="paragraph">
<p>The <code>EntityViewCommand</code> represents the command that should be executed on the <code>EntityViewFactory</code> to create the corresponding <code>EntityView</code>.
Most often the command represents the form of a view where the request parameters are bound to.</p>
</div>
<div class="paragraph">
<p>An <code>EntityViewCommand</code> has 2 attributes: the (optional) entity DTO being bound and a map of named extensions.
Customizing view processing can be done by registering additional extensions that will be rendered and validated upon binding.</p>
</div>
<div class="paragraph">
<p>The <code>EntityViewCommand</code> will be validated for every state modifying request: web requests using POST, PUT, PATCH or DELETE.</p>
</div>
<div class="paragraph">
<p>Please refer to the <a href="https://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/request/EntityViewCommand.html"><code>EntityViewCommand</code> javadoc</a> for a description of all available properties.</p>
</div>
</div>
<div class="sect3">
<h4 id="entityviewfactory"><a class="anchor" href="#entityviewfactory"></a>1.1.5. EntityViewFactory</h4>
<div class="paragraph">
<p>Every view is built by an <code>EntityViewFactory</code>.
An <code>EntityViewRegistry</code> (like <code>EntityConfiguration</code> or <code>EntiyAssociation</code>) is nothing but a map of <code>EntityViewFactory</code> by view name.</p>
</div>
<div class="paragraph">
<p>An <code>EntityViewFactory</code> is a stateless controller with 4 controller methods that are expected to be called in a specific order.
Please refer to the <a href="https://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/EntityViewFactory.html">javadoc</a> for an overview of the different controller methods and their purpose.</p>
</div>
<div class="sect4">
<h5 id="dispatchingentityviewfactory-and-entityviewprocessor"><a class="anchor" href="#dispatchingentityviewfactory-and-entityviewprocessor"></a>DispatchingEntityViewFactory and EntityViewProcessor</h5>
<div class="paragraph">
<p>EntityModule has only a single implementation of <code>EntityViewFactory</code> in the form of the <code>DefaultEntityViewFactory</code>.
The <code>DefaultEntityViewFactory</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>supports <code>ViewElement</code> based rendering model - heavily used by EntityModule for building the HTML markup</p>
</li>
<li>
<p>dispatches its controller methods in a more fine-grained manner to a list of registered and ordered <code>EntityViewProcessor</code> instances.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default builders when <a href="#configuring-views">configuring views</a> only register <code>EntityViewProcessor</code> beans on the factory.
When an <code>EntityViewFactory</code> controller method is being called, it will be translated into one or more processor methods and those method calls will be dispatched to all processors in order.</p>
</div>
<div class="paragraph">
<p>Several adapter <code>EntityViewProcessor</code> classes are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>use <code>EntityViewProcessorAdapter</code> for most use cases, it provides several adapter methods that also allow you to hook into the <code>ViewElement</code> generation lifecycle</p>
</li>
<li>
<p>use <code>SimpleEntityViewProcessorAdapter</code> if you do not need to hook into the <code>ViewElement</code> generation lifecycle</p>
</li>
<li>
<p>use <code>ExtensionViewProcessorAdapter</code> if you want to create a custom view/form that represents a so-called extension object</p>
<div class="ulist">
<ul>
<li>
<p>the view is part of the entity configuration but often does not manage properties of the actual entity type</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>DefaultEntityViewFactory</code> will not execute any of the rendering related methods if any of the previous methods has marked the <code>EntityView</code> as being a redirect.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Please refer to the <a href="https://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/EntityViewProcessor.html">EntityViewProcessor</a>, <a href="https://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/EntityViewProcessorAdapter.html">EntityViewProcessorAdapter</a> and <a href="https://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/SimpleEntityViewProcessorAdapter.html">SimpleEntityViewProcessorAdapter</a> for more details on the available processor methods.
The appendix also provides a <a href="#appendix-view-processors">list of all available general purpose processors</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="transaction-support"><a class="anchor" href="#transaction-support"></a>Transaction support</h5>
<div class="paragraph">
<p>The <code>DefaultEntityViewFactory</code> uses a <code>TransactionalEntityViewProcessorRegistry</code> and enables transactions on all state modifying HTTP methods: <strong>POST</strong>, <strong>PUT</strong>, <strong>PATCH</strong> or <strong>DELETE</strong>.
If a transaction manager bean name is available on the <code>EntityConfiguration</code>, transactions will be enabled by default for all form views: create, update, delete and custom form views.
This means that all calls in state modifying <code>doControl()</code> methods of all <code>EntityViewProcessor</code> instances will happen in a single transaction.</p>
</div>
<div class="paragraph">
<p>The transaction manager bean name is registered as an attribute <code>EntityAttributes.TRANSACTION_MANAGER_NAME</code> and is detected automatically for every Spring Data repository based entity.</p>
</div>
<div class="paragraph">
<div class="title">Manually enabling transactions on a view</div>
<p>You can enable transactions manually on the <code>EntityViewFactoryBuilder</code> by specifying either the <code>PlatformTransactionManager</code> to use, the name of the transaction manager bean or a <code>TransactionTemplate</code> if you need more fine-grained control.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="model-attributes"><a class="anchor" href="#model-attributes"></a>1.1.6. Model attributes</h4>
<div class="paragraph">
<p>The <code>GenericEntityViewController</code> exposes the following model attributes to the Spring MVC view:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>entityViewRequest</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityViewRequest</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>entityViewCommand</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityViewCommand</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>entityViewContext</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityViewContext</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="default-view-types"><a class="anchor" href="#default-view-types"></a>1.1.7. Default view types</h4>
<div class="paragraph">
<p>EntityModule supports 3 view types by default.</p>
</div>
<div class="paragraph">
<p>When defining a new view (see the next section) it will be one of these types.
The view type determines the base template that will be used to setup the <code>EntityViewFactory</code>.</p>
</div>
<div class="paragraph">
<p>The following view types are defined:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">View type</th>
<th class="tableblock halign-left valign-top">Template name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">list view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">listView
(<code>EntityView.LIST_VIEW_NAME</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base configuration for rendering a list of entities.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">form view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">updateView
(<code>EntityView.UPDATE_VIEW_NAME</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base configuration for rendering a form for a single entity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">generic view</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">genericView
(<code>EntityView.GENERIC_VIEW_NAME</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Barebone configuration for visualizing a single entity.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The template name can be used to replace the initializer for the <code>EntityViewFactoryBuilder</code>.
See the chapter on the <a href="#view-builder-initializer">EntityViewFactoryBuilderInitializer</a>.</p>
</div>
<div class="paragraph">
<p>See also the next chapters for more information on <a href="#list-view">list view</a>, <a href="#form-view">form view</a> and <a href="#generic-view">generic view</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-views"><a class="anchor" href="#configuring-views"></a>1.1.8. Configuring views</h4>
<div class="paragraph">
<p>Existing views can be modified or new ones registered using an <code>EntityViewFactoryBuilder</code> or <code>EntityListViewFactoryBuilder</code>.
You usually don&#8217;t create these manually but get a builder for the corresponding view from the configuration or association builder.</p>
</div>
<div class="paragraph">
<p>The builders provide common properties that will configure one or more <code>EntityViewProcessor</code> instances on the view factory.
They also allow you to modify the processor collection directly by adding or removing processors, or by post-processing the entire <code>EntityViewProcessorRegistry</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example adding an EntityViewProcessor to the default list view</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">configuration.withType( MyEntity.class )
             .listView( lvb -&gt; lvb.viewProcessor( myProcessor ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following chapters provide some more details on how to configure the default view types.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="list-view"><a class="anchor" href="#list-view"></a>1.2. List view</h3>
<div class="paragraph">
<p>default settings of a list view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>user must have read allowable action</p>
</li>
<li>
<p>renders values as LIST_VALUE</p>
</li>
<li>
<p>shows all readable properties</p>
</li>
<li>
<p>adds update/delete buttons for every item if the user as update and delete action respectively</p>
</li>
<li>
<p>supports paging and sorting</p>
</li>
<li>
<p>allows configuring sortable properties and the default sort</p>
</li>
<li>
<p>includes a form at the top that can be used for adding filters</p>
</li>
<li>
<p>a create button for the entity if the user has create action allowed</p>
</li>
<li>
<p>supports global feedback messages set with the <code>EntityViewPageHelper</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>default processors</p>
</div>
<div class="sect3">
<h4 id="adding-a-list-view"><a class="anchor" href="#adding-a-list-view"></a>1.2.1. Adding a list view</h4>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
<div class="sect3">
<h4 id="customizing-a-list-view"><a class="anchor" href="#customizing-a-list-view"></a>1.2.2. Customizing a list view</h4>
<div class="paragraph">
<p>TODO</p>
</div>
<div class="paragraph">
<div class="title">Custom sorting</div>
<p>Customizing the sort behaviour of a specific property can be done by setting a <code>Sort.Order.class</code> attribute on the <code>EntityPropertyDescriptor</code>.
You can use this to sort on a different property instead, or to specify behaviour for null handling and case sensitivity.</p>
</div>
</div>
<div class="sect3">
<h4 id="list-view-filter"><a class="anchor" href="#list-view-filter"></a>1.2.3. Filtering a list view</h4>
<div class="paragraph">
<p>By default a list view is not filtered.
If your entity has an <a href="#entity-query-executor"><code>EntityQueryExecutor</code></a> available you can easily activate a simple yet powerful <a href="#entity-query-language-eql">EQL-based filter</a>.
Activating <code>EntityQuery</code> based filtering can be done through the builders:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Activate the EQL-based filter on every entity that has an EntityQueryExecutor</span>
configuration.matching( c -&gt; c.hasAttribute( EntityQueryExecutor.class ) )
             .listView( lvb -&gt; lvb.entityQueryFilter( <span class="predefined-constant">true</span> ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#entity-list-view-custom-filter">this chapter</a> for information on how to configure a custom filter for a list view.</p>
</div>
</div>
<div class="sect3">
<h4 id="entity-list-view-custom-filter"><a class="anchor" href="#entity-list-view-custom-filter"></a>1.2.4. Adding a custom filter to a list view</h4>
<div class="paragraph">
<p>A filter on a list view usually consists of 2 parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an <code>EntityViewProcessor</code> that provides the filtering options on the list view</p>
</li>
<li>
<p>an <code>EntityViewProcessor</code> that fetches the items using the filtering options</p>
<div class="ulist">
<ul>
<li>
<p>a custom form is usually added to the <code>EntityViewCommand.addExtension()</code> for both postback and optional validation</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both parts can easily be combined in a single <code>EntityViewProcessor</code>.</p>
</div>
<div class="paragraph">
<p><strong>Custom filter example</strong></p>
</div>
<div class="paragraph">
<p>The following code illustrates adding a simple filter to a view.
The filter uses a separate repository method to lookup entities by name.
The filter options are added as a form on top of the list view, the form in this case rendered via a custom Thymeleaf template.</p>
</div>
<div class="listingblock">
<div class="title">Implementation of a single class that holds all filter logic</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">GroupFilteringProcessor</span> <span class="directive">extends</span> EntityViewProcessorAdapter
{
        <span class="annotation">@Autowired</span>
        <span class="directive">private</span> GroupRepository groupRepository;

        <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> initializeCommandObject( EntityViewRequest entityViewRequest,
                                         EntityViewCommand command,
                                         WebDataBinder dataBinder ) {
        command.addExtension( <span class="string"><span class="delimiter">&quot;</span><span class="content">filter</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> );
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doControl( EntityViewRequest entityViewRequest,
                              EntityView entityView,
                              EntityViewCommand command,
                              BindingResult bindingResult,
                              HttpMethod httpMethod ) {
        <span class="predefined-type">String</span> filter = command.getExtension( <span class="string"><span class="delimiter">&quot;</span><span class="content">filter</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">String</span>.class );
        <span class="predefined-type">Pageable</span> pageable = command.getExtension( PageableExtensionViewProcessor.DEFAULT_EXTENSION_NAME, <span class="predefined-type">Pageable</span>.class );

        <span class="keyword">if</span> ( !StringUtils.isBlank( filter ) ) {
            entityView.addAttribute( <span class="string"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>, groupRepository.findByNameContaining( filter, pageable ) );
        }
        <span class="keyword">else</span> {
            entityView.addAttribute( <span class="string"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>, groupRepository.findAll( pageable ) );
        }
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> postRender( EntityViewRequest entityViewRequest,
                               EntityView entityView,
                               ContainerViewElement container,
                               ViewElementBuilderContext builderContext ) {
        Optional&lt;ContainerViewElement&gt; header = find( container, <span class="string"><span class="delimiter">&quot;</span><span class="content">entityListForm-header</span><span class="delimiter">&quot;</span></span>, ContainerViewElement.class );
        header.ifPresent(
                h -&gt; {
                    Optional&lt;NodeViewElement&gt; actions
                            = find( h, <span class="string"><span class="delimiter">&quot;</span><span class="content">entityListForm-header-actions</span><span class="delimiter">&quot;</span></span>, NodeViewElement.class );
                    actions.ifPresent( a -&gt; a.addCssClass( <span class="string"><span class="delimiter">&quot;</span><span class="content">pull-right</span><span class="delimiter">&quot;</span></span> ) );

                    h.addChild( <span class="keyword">new</span> TemplateViewElement( <span class="string"><span class="delimiter">&quot;</span><span class="content">th/entityModuleTest/filters :: filterForm</span><span class="delimiter">&quot;</span></span> ) );
                }
        );
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Custom Thymeleaf template that builds the form</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;fragments</span> <span class="attribute-name">xmlns:th</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list-header form form-inline</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:fragment</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">filterForm</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-group</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;label</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">group-name-filter</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Filter by name:<span class="tag">&lt;/label&gt;</span>
            <span class="tag">&lt;input</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">group-name-filter</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">extensions[filter]</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">th:value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${entityViewCommand.extensions['filter']}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-control</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">btn btn-default</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Apply filter</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/fragments&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Registration of the custom filter on the list view</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">entities.withType( <span class="predefined-type">Group</span>.class )
        .listView( lvb -&gt; lvb
            .entityQueryFilter( <span class="predefined-constant">false</span> )           <span class="comment">// optional - disable the previously activated entity query filter</span>
            .filter( groupFilteringProcessor() )  <span class="comment">// register the custom filter</span>
                );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="list-summary-view"><a class="anchor" href="#list-summary-view"></a>1.2.5. List summary view</h4>
<div class="paragraph">
<p>It is possible to activate a detail view inline in a list view.
If the <code>EntityConfiguration</code> or <code>EntityAssociation</code> has a view named <strong>listSummaryView</strong> a summary pane will automatically become available when clicking on the item row in the table.
The summary pane is called using AJAX and only the <em>content</em> fragment of the page will be rendered.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Activate a summary view in the main user results table using a custom Thymeleaf template</span>
configuration.withType( User.class )
             .view( EntityView.SUMMARY_VIEW_NAME, vb -&gt; vb.template( <span class="string"><span class="delimiter">&quot;</span><span class="content">th/myModule/userSummary</span><span class="delimiter">&quot;</span></span> ) );</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="form-view"><a class="anchor" href="#form-view"></a>1.3. Form view</h3>
<div class="sect3">
<h4 id="create-and-update-view"><a class="anchor" href="#create-and-update-view"></a>1.3.1. create and update view</h4>
<div class="paragraph">
<p>default settings of a form view:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>user must have update allowable action</p>
</li>
<li>
<p>renders values as LIST_VALUE</p>
</li>
<li>
<p>shows all readable properties</p>
</li>
<li>
<p>adds update/delete buttons for every item if the user as update and delete action respectively</p>
</li>
<li>
<p>supports paging and sorting</p>
</li>
<li>
<p>allows configuring sortable properties and the default sort</p>
</li>
<li>
<p>includes a form at the top that can be used for adding filters</p>
</li>
<li>
<p>a create button for the entity if the user has create action allowed</p>
</li>
<li>
<p>supports global feedback messages set with the <code>EntityViewPageHelper</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>default processors</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="delete-view"><a class="anchor" href="#delete-view"></a>1.4. Delete view</h3>
<div class="paragraph">
<p>default settings</p>
</div>
<div class="paragraph">
<p>default processors</p>
</div>
<div class="paragraph">
<p>A delete action will be available for all entities where <code>AllowableAction.DELETE</code> is present, this is the default unless more explicit permissions are configured.
A delete will always redirect to a confirmation page by default.
Because the possibility to delete an entity often depends on other factors (usually associations), the default <code>EntityDeleteViewFactory</code> publishes an event that allows customizing said confirmation page.</p>
</div>
<div class="paragraph">
<p>By catching the <code>BuildEntityDeleteViewEvent</code> your code can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>suppress the ability to delete (by hiding the delete button)</p>
</li>
<li>
<p>add associations to the form</p>
</li>
<li>
<p>add custom feedback messages to the form (and optionally remove the associations block)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This should be sufficient for most use cases without having to revert to custom <code>EntityViewProcessor</code> implementations.
Of course the latter would work as well.</p>
</div>
<div class="paragraph">
<div class="title">Entity associations</div>
<p>The initial <code>BuildEntityDeleteViewEvent</code> is configured based on the <code>EntityAssociation</code> list of the entity.
If associated items are detected, they influence the form settings depending on the <strong>parentDeleteMode</strong> property of the <code>EntityAssociation</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ParentDeleteMode.IGNORE</code>: item information is not printed nor influences the ability to delete</p>
</li>
<li>
<p><code>ParentDeleteMode.WARN</code>: item information is printed on the form but does not influence the ability to delete</p>
</li>
<li>
<p><code>ParentDeleteMode.SUPPRESS</code>: item information is printed on the form and disables the ability to delete, this is the default setting</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The event is published after the initial association information has been set.</p>
</div>
<div class="paragraph">
<div class="title">Performing the delete</div>
<p>The EntityModule simply calls the delete method of the <code>EntityModel</code>, usually a direct call to a repository <code>delete()</code>.
You will have to take care yourself of complex delete scenarios - like deleting the associations - by either modifying the <code>EntityModel</code> or using another mechanism like the <code>EntityInterceptor</code>.</p>
</div>
<div class="sect3">
<h4 id="creating-an-additional-form-view"><a class="anchor" href="#creating-an-additional-form-view"></a>1.4.1. creating an additional form view</h4>

</div>
<div class="sect3">
<h4 id="configuring-form-text"><a class="anchor" href="#configuring-form-text"></a>1.4.2. Configuring form controls text</h4>
<div class="paragraph">
<p>A form view usually renders properties in either <code>ViewElementMode.FORM_WRITE</code> or <code>ViewElementMode.FORM_READ</code>, depending on the fact if a property can be edited or not.
By default, a property like this would be rendered as a form group (<code>FormGroupElement</code> that is usually a combination of the label and the control for the property) or a <a href="#fieldset-properties">fieldset</a> (<code>FieldsetFormElement</code>).</p>
</div>
<div class="paragraph">
<p>In <code>FORM_READ</code> (readonly) mode, the default form renders only the label of a property.
You can customize the label value by setting the corresponding message code, for example: <code>UserModule.entities.user.properties.username=Name of the user</code>.</p>
</div>
<div class="paragraph">
<p>In <code>FORM_WRITE</code> mode several other message codes will be resolved as well, and if they return values, additional content will be shown on the form.</p>
</div>
<div class="paragraph">
<div class="title">Description text</div>
<p>A description provides additional context for the property being shown.
It is rendered above the control of a form group, or above the content of a fieldset.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>UserModule.entities.user.properties.username[description]=The username must be unique.</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Help text</div>
<p>Help text is rendered below the control of a form group, or below the content of a fieldset.
It usually provides a (less important) hint for updating the value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>UserModule.entities.user.properties.username[help]=Try to pick something you will remember.</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Tooltip text</div>
<p>Tooltip text is added as a separate icon (question mark) that will only show the actual tooltip when you hover over it with the mouse cursor.
Tooltips are often used as an alternative for help text.
The difference is that help text is always visible, whereas to see the tooltip a used will need to take an extra action.</p>
</div>
<div class="paragraph">
<p>The tooltip icon is added to the label of a form group or to the legend of a fieldset.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>UserModule.entities.user.properties.username[tooltip]=You will receive an errror when saving if your username is already taken.</pre>
</div>
</div>
<div class="paragraph">
<p>By default all message codes allow HTML entities, so you can add additional links or markup to them.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In case of a form group you can also manually set the different text components from code.
Values set from code will take precedence and will never be replaced by the values resolved from message codes.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A more detailed explanation of how message codes are resolved and which codes are possible can be found in <a href="#message-codes">the appendix</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="generic-view"><a class="anchor" href="#generic-view"></a>1.5. custom views</h3>
<div class="paragraph">
<p>TODO: register menu item, register access validator
=== AdminWebModule JQuery plugins
:chapter-number: 0
The default EntityModule web resources add some JQuery based javascript plugins.</p>
</div>
<div class="sect3">
<h4 id="entitymodule-object"><a class="anchor" href="#entitymodule-object"></a>1.5.1. EntityModule object</h4>
<div class="paragraph">
<p>All EntityModule and BootstrapUiModule javascript can be initialized by calling <code>EntityModule.initializeFormElements()</code>.
This method optionally takes an argument that is the node in which the form elements should be initialized.</p>
</div>
<div class="paragraph">
<p>This is automatically done on document load, but when using AJAX fragment rendering, you usually want to re-initialize the DOM element that was updated.</p>
</div>
<div class="paragraph">
<div class="title">Custom initializers</div>
<p>You can easily add a custom initializer function by adding it with <code>EntityModule.registerInitializer( callback )</code>.
There is no need to manually execute your callback on document load, as that will happen automatically by the EntityModule.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Don&#8217;t execute your callback on document load and then add it to the initializers.
Execution will happen automatically when calling <code>registerInitializer()</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example registering a custom initializer that configures a sortable table to use AJAX loading</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">EntityModule.registerInitializer( function( node ) {
    $( '[data-tbl-type=&quot;paged&quot;]', node )
        .on( &quot;emSortableTable:prepareData&quot;, function( e, params ) {
            console.log( &quot;enhancing the data&quot;, params );
            params['_partial'] = 'content';
        } )
        .on( &quot;emSortableTable:loadData&quot;, function( e, params ) {
            console.log( &quot;performing ajax load&quot; );
            e.preventDefault();

            $.get( '#', $.param( params, true ), function( data ) {
                   $( '.pcs' ).replaceWith( data );
                   // initialize the form elements in the element just updated
                   EntityModule.initializeFormElements( $('.pcs') );
               }
            );
        } )
} );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sortable-tables"><a class="anchor" href="#sortable-tables"></a>1.5.2. Sortable tables</h4>
<div class="paragraph">
<p>The default list views support paging and sorting of the pages, where client-side code is used to trigger reloading of the page.</p>
</div>
<div class="paragraph">
<p>Every table matching the selector <strong>[data-tbl-type="paged"]</strong> will be initialized for sorting and paging.
A sortable table considers 3 default parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>page</em>: page number</p>
</li>
<li>
<p><em>size</em>: number of results a single page should have</p>
</li>
<li>
<p><em>sort</em>: array of sort strings: <em>field,direction</em> (eg. <em>name,ASC</em>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a table is bound to a form (specified by the <em>data-tbl-form</em> attribute), paging or sorting will result in that form being submitted with the parameters being added as hidden form elements.
If no form is bound, the current URL will be reloaded and the parameters added to the query string.</p>
</div>
<div class="paragraph">
<div class="title">Customizing behaviour</div>
<p>You can hook into the default behaviour by using the events a sortable table emits or listens to.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 44.4444%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Argument</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">emSortableTable:moveToPage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trigger this event if you want to reload the data for a specific page.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">emSortableTable:sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trigger this event if you want to reload the data with different sorting.
If the data is already sorted on the field specified, the sort order will be reversed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the field to sort on.
Usually value of the <em>data-tbl-field</em> attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">emSortableTable:prepareData</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Called after determining page number, result size and fields to sort on.
Subscribe to this event if you want to expand or modify the parameters that should be submitted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter map containing: <em>page</em>,<em>size</em> and <em>sort</em> keys.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">emSortableTable:loadData</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Called after the parameters for the data have been prepared.
Subscribe to this event if you want to provide a custom method of fetching the data (eg AJAX based).
Note that you have to prevent the default execution if you provide your own mechanism.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameters that should be used for fetching the data.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Manually creating sortable tables</div>
<p>If you want to manually initialize a sortable table you can directly call the JQuery plugin <strong>emSortableTable()</strong> on any element.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can easily create the valid structure for a sortable table using the <code>EntityViewElementBuilderHelper</code>.
This allows you to create a <code>SortableTableBuilder</code> that builds a <code>ViewElement</code> that renders the right markup including all data attributes.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A valid sortable table requires several data attributes to be present on the DOM element:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data-tbl</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique id of the data table.
 Also used on column headings and pager control elements to specify the table they belong to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data-tbl-form</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) Name of the form that should be submitted when reloading the table data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data-tbl-total-pages</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of pages in the result set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data-tbl-size</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single page size.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data-tbl-current-page</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current page number (0 based).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data-tbl-sort</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current sort value.
This is a JSON object structure containing the actual sort fields and their order.
Depending on the the presence of custom <code>Sort.Order.class</code> attributes on the <code>EntityPropertyDescriptor</code> these field names will be the same as the property names.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data-tbl-field</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only used on heading cells that should be sortable.
Specifies the field this column represents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data-tbl-sort-property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only used on heading cells that should be sortable.
Contains the actual property name that is being sorted on.
Usually the same as the field name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data-tbl-page-selector</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used on a pager text field that contains the page number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data-tbl-page</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used on any element that should navigate to a page on a click event.
Contains the value of the page that should be navigated to.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="entitylinkbuilder"><a class="anchor" href="#entitylinkbuilder"></a>1.6. EntityLinkBuilder</h3>
<div class="paragraph">
<p>An <code>EntityConfiguration</code> or <code>EntityAssociation</code> can have one or more <code>EntityLinkBuilder</code> instances registered in its attributes.
An <code>EntityLinkBuilder</code> is used to create application links to management controllers for the entity.
By default the <code>EntityModule</code> will create an <code>EntityLinkBuilder</code> for the management pages in admin web if <code>AdminWebModule</code> is present, and this link builder will be registered as the attribute with <code>EntityLinkBuilder</code> class as key.</p>
</div>
<div class="paragraph">
<p>You can use the <code>EntityLinkBuilder</code> directly for example in redirects, often the specific <code>EntityLinkBuilder</code> is overridable per view.
All links the <code>EntityLinkBuilder</code> generates are entirely configurable, please refer to the javadoc for all possible settings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">EntityLinkBuilder linkBuilder = entityConfiguration.getAttribute( EntityLinkBuilder.class );

<span class="comment">// Will create a link of the form &quot;/entities/{parent}/{parentId}/update&quot;</span>
<span class="predefined-type">String</span> path = linkBuilder.update( parent );</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="entitylinkbuilder-for-associations"><a class="anchor" href="#entitylinkbuilder-for-associations"></a>1.6.1. EntityLinkBuilder for associations</h4>
<div class="paragraph">
<p>Associations usually also have an <code>EntityLinkBuilder</code> registered, it is possible to create links to items that are an association from a parent entity.
To achieve this you must <em>scope</em> the <code>EntityLinkBuilder</code> to the parent entity it belongs to.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">EntityLinkBuilder linkBuilder = entityConfiguration.getAttribute( EntityLinkBuilder.class );

EntityConfiguration associated = association.getTargetEntityConfiguration();
EntityLinkBuilder associatedLinkBuilder = association.getAttribute( EntityLinkBuilder.class )
                                                     .asAssociationFor( linkBuilder, parent );

<span class="comment">// Will create a link of the form &quot;/entities/{parent}/{parentId}/associations/{associationName}/{childId}/update&quot;</span>
<span class="predefined-type">String</span> path = associatedLinkBuilder.update( child );</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="entity-associations"><a class="anchor" href="#entity-associations"></a>2. Entity associations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>EntityModule</code> attempts to automatically detect related entities and creates associations mainly to facilitate UI generation.
Currently <code>@OneToMany</code>, <code>@ManyToMany</code> and <code>@ManyToOne</code> annotations from <code>javax.persistence</code> API are all scanned and used to build <code>EntityAssociation</code> entries.</p>
</div>
<div class="paragraph">
<p>In the administrative UI the management of related entities can often be done either through the property or the association.
This is especially the case for <code>@ManyToMany</code> and <code>@OneToMany</code> associations that are mapped through a property with collection type.
By default related entity management will be done through the property and the association will be generated but hidden.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you want to enable management through the association interface, you should manipulate the <code>hidden</code> property of both the association and the property using an <code>EntityConfigurer</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> configure( EntitiesConfigurationBuilder configuration ) {
    <span class="comment">// Groups should be managed through the association instead of the property</span>
    configuration.withType( MachinePrincipal.class )
                 .properties( props -&gt; props.property( <span class="string"><span class="delimiter">&quot;</span><span class="content">groups</span><span class="delimiter">&quot;</span></span> ).hidden( <span class="predefined-constant">true</span> ) )
                 .association( ab -&gt; ab.name( <span class="string"><span class="delimiter">&quot;</span><span class="content">machinePrincipal.groups</span><span class="delimiter">&quot;</span></span> ).show() );
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="association-type"><a class="anchor" href="#association-type"></a>2.1. Association type</h3>
<div class="paragraph">
<p>Every <code>EntityAssociation</code> is of a specific type, configured through the <strong>associationType</strong> property.
The association type determines how the associated values can be managed through the user interface.</p>
</div>
<div class="paragraph">
<p>The following association types are possible:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Association type</th>
<th class="tableblock halign-left valign-top">Behaviour</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LINKED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The related entities are only linked to.
The tab of the parent entity shows the list of related entities, but any modify action will navigate away from the parent entity.</p>
<p class="tableblock">This is the appropriate type if your related entities can in turn have other related entities.
Usually this also means the related entity type has a main menu item.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EMBEDDED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The related entities will be managed through the tab of their parent entity.
Modifying a related entity will be displayed as modifying the parent entity, no action will leave the context of the parent entity.</p>
<p class="tableblock">Use this type if the related entities only exist if their parent exists.
Usually the related entity type does not have any menu item, nor sub tabs (the latter would not be displayed).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>By default an association is of type <code>LINKED</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="parentdeletemode"><a class="anchor" href="#parentdeletemode"></a>2.2. ParentDeleteMode</h3>
<div class="paragraph">
<p>An <code>EntityAssociation</code> has a <strong>parentDeleteMode</strong> property that determines how associated items will influence the ability to delete in the user interface.
The default value is <code>SUPPRESS</code> but can be set through the <code>EntitiesConfigurationBuilder</code>.</p>
</div>
<div class="paragraph">
<p>For more information see the <a href="#delete-view">delete view chapter</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="association-naming-and-location"><a class="anchor" href="#association-naming-and-location"></a>2.3. Association naming and location</h3>
<div class="paragraph">
<p>Associations are added to the <code>EntityConfiguration</code> for which it makes most sense to manage them from a UI perspective.
The association naming however is done according to the entity class and property names.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>entity <code>Group</code></p>
</li>
<li>
<p>entity <code>User</code> has a one to many with <code>Group</code> on property <strong>groups</strong></p>
</li>
<li>
<p>association <strong>user.groups</strong> will be created on the entity configuration of <code>Group</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="customize-associated-entity-creation"><a class="anchor" href="#customize-associated-entity-creation"></a>2.4. Customize associated entity creation</h3>
<div class="paragraph">
<p>You can customize the creation of an associated entity in the form views, by setting a custom <code>EntityFactory</code>.
This is especially useful for manually creating associations.</p>
</div>
<div class="paragraph">
<p>An <code>EntityAssociation</code> can have an <code>EntityFactory.class</code> attribute set that contains the <code>EntityFactory</code> that should be used for creating associated items.
If no factory is set as attribute on the association, the default <code>EntityFactory</code> of the target configuration will be used.</p>
</div>
<div class="paragraph">
<p>If there is an <code>EntityFactory</code> attribute set on the association, that factory will be used when creating a new associated entity instance.
The <code>createNew()</code> factory method will get called with the parent entity (for whom an associated item is being created) as single parameter.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="integration-with-other-modules"><a class="anchor" href="#integration-with-other-modules"></a>3. Integration with other modules</h2>
<div class="sectionbody">
<div class="sect3">
<h4 id="integration-adminwebmodule"><a class="anchor" href="#integration-adminwebmodule"></a>3.1. AdminWebModule</h4>
<div class="paragraph">
<p>If the AdminWebModule is present entity management controllers will be created for all registered entity configurations.
If you want to avoid the automatic registration of entity management controllers for a particular entity type, you should set the <code>EntityConfiguration</code> as <code>hidden</code>.
This will effectively disable the default entity controllers for that type, and hide the existence of the entity type from the administration interface.</p>
</div>
<div class="paragraph">
<p>You can also hide one or more associations.
By default an association will not be shown if one of the participating entities is hidden.
If you specify the <code>hidden</code> property of an <code>EntityAssociation</code> explicitly, that value will take precedence of the entity configurations.
This way it is possible to generate management pages for associated entities, but not for the main entity type.</p>
</div>
</div>
<div class="sect3">
<h4 id="adminwebmodule-developer-tools"><a class="anchor" href="#adminwebmodule-developer-tools"></a>3.2. AdminWebModule: developer tools</h4>
<div class="paragraph">
<p>When integrated with AdminWebModule and development mode is active, an entity registry browser will be added to the <em>Developer tools</em> section of the administration ui.
The browser allows you to inspect the registered entities along with their views, associations and properties.</p>
</div>
</div>
<div class="sect2">
<h3 id="auditable"><a class="anchor" href="#auditable"></a>3.3. Auditable</h3>
<div class="paragraph">
<p>If <em>SpringSecurityModule</em> is present, EntityModule adapts the default views for <code>Auditable</code> entities.
The <strong>createdBy</strong> and <strong>lastModifiedBy</strong> properties are rendered using an <code>AuditablePrincipalPropertyViewElementBuilder</code> which uses the <code>SecurityPrincipalLabelResolverStrategy</code> to generate a pretty label for a principal (eg. full name instead of username).
The default properties are removed from default views, but an aggregated property <strong>created</strong> and <strong>lastModified</strong> is added.
The aggregated properties combine both the timestamp and the principal in a single property using the <code>AuditablePropertyViewElementBuilder</code>.</p>
</div>
<div class="paragraph">
<p>See the <code>AuditableEntityUiConfiguration</code> for full customization.</p>
</div>
</div>
</div>
</div>
<h1 id="customizing-generated-entity-views" class="sect0"><a class="anchor" href="#customizing-generated-entity-views"></a>Customizing generated Entity views</h1>
<div class="openblock partintro">
<div class="content">
The following section gives an overview of common customizations for generated entity views.
</div>
</div>
<div class="sect2">
<h3 id="view-builder-initializer"><a class="anchor" href="#view-builder-initializer"></a>1.1. Customizing the EntityViewFactoryBuilderInitializer</h3>

</div>
<div class="sect2">
<h3 id="changing-entity-names-property-names-or-other-labels"><a class="anchor" href="#changing-entity-names-property-names-or-other-labels"></a>1.2. Changing entity names, property names or other labels</h3>
<div class="paragraph">
<p>All entity names, property names and labels can be customized using message sources.
For an explanation of the different message codes used, see <a href="#appendix-message-codes">the relevant appendix</a>.</p>
</div>
<div class="paragraph">
<p>See also the section on <a href="#configuring-form-text">configuring form controls text</a> for common customizations.</p>
</div>
</div>
<div class="sect2">
<h3 id="customize-page-layout"><a class="anchor" href="#customize-page-layout"></a>1.3. Setting page title or changing page layout</h3>
<div class="paragraph">
<p>Setting a page title can be done by adding the corresponding message code.
All default views automatically add a page title (optionally with sub text) if the corresponding message code resolves a non-empty string.</p>
</div>
<div class="paragraph">
<p>See the <a href="#appendix-message-codes">message codes appendix</a> for a list of relevant message codes.</p>
</div>
<div class="paragraph">
<div class="title">Changing the page layout</div>
<p>Entity views use a <code>PageContentStructure</code> for the base structure of the web page.
The <code>PageContentStructure</code> is available as a request scoped bean, but can also be retrieved from the <code>EntityViewRequest</code>.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://across-docs.foreach.be/across-standard-modules/AdminWebModule/2.1.1.RELEASE/reference#page-content-structure">AdminWebModule reference documentation</a> for a basic explanation of <code>PageContentStructure</code>.</p>
</div>
<div class="paragraph">
<div class="title">Modifying the page layout for all (or a selection of) views</div>
<p>If you want to modify page layout for multiple views at runtime, you can subscribe to the <a href="https://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/support/EntityPageStructureRenderedEvent.html"><code>EntityPageStructureRenderedEvent</code></a>.
This event is published during the <code>postRender()</code> phase and gives you context of the view that is being rendered, allowing you to make changes outside regular <code>EntityViewProcessor</code> implementations.</p>
</div>
<div class="paragraph">
<p><code>SingleEntityPageStructureViewProcessor</code> and <code>ListPageStructureViewProcessor</code> are the <a href="#appendix-view-processors">view processors</a> responsible for building the basic page structure and publishing the event.</p>
</div>
</div>
<div class="sect2">
<h3 id="specifying-a-custom-template"><a class="anchor" href="#specifying-a-custom-template"></a>1.4. Specifying a custom template</h3>
<div class="paragraph">
<p>Every default view uses a specific (Thymeleaf) template that renders the <code>ViewElement</code> list created by the view.
If you want control over the rendering through a separate template you can specify a different template using the <code>template()</code> method on the <code>EntityViewFactoryBuilder</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="entityviewprocessor"><a class="anchor" href="#entityviewprocessor"></a>1.5. EntityViewProcessor</h3>
<div class="paragraph">
<p>Modifying a default view can be done by registering an <code>EntityViewProcessor</code> for that view.
This API allows you to modify the <code>ViewElement</code> collection that should be generated.
This is a useful hook to add for example custom form elements that you wish to add and process.
If can also be used to reorganize the layout of the form from backend code using the <code>ContainerViewElementUtils</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="using-a-custom-entityviewfactory"><a class="anchor" href="#using-a-custom-entityviewfactory"></a>1.6. Using a custom EntityViewFactory</h3>
<div class="paragraph">
<p>Full control can be done by registering a custom <code>EntityViewFactory</code> implementation.</p>
</div>
</div>
<div class="sect2">
<h3 id="selecting-properties"><a class="anchor" href="#selecting-properties"></a>1.7. Selecting properties</h3>
<div class="paragraph">
<p><code>EntityPropertySelector</code>, incremental builders, keep current, select all, select all without default filter, exclude</p>
</div>
</div>
<div class="sect2">
<h3 id="configuring-property-view-types"><a class="anchor" href="#configuring-property-view-types"></a>1.8. Configuring property view types</h3>
<div class="paragraph">
<p>You can configure a property using the <code>EntityPropertyDescriptorBuilder</code>.
This builder also contains some methods to influence the <code>ViewElement</code> that should be built for that property for a given mode.</p>
</div>
<div class="paragraph">
<p>By default a <code>ViewElement</code> will be built based on the property and some of its annotations.
There are 3 ways you can influence the default behaviour:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>specify a custom <code>viewElementType()</code> for a given mode</p>
<div class="ulist">
<ul>
<li>
<p>a default builder of that type will be created for that mode</p>
</li>
</ul>
</div>
</li>
<li>
<p>specify one or more <code>viewElementPostProcessor()</code> for a given mode</p>
<div class="ulist">
<ul>
<li>
<p>these <code>ViewElementPostProcessor</code> instances will be added to the default builder, in the order they were registered</p>
</li>
</ul>
</div>
</li>
<li>
<p>specify a custom  <code>viewElementBuilder()</code> for a given mode</p>
<div class="ulist">
<ul>
<li>
<p>the default building will be ignored and only your custom builder will be used</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="fieldset-properties"><a class="anchor" href="#fieldset-properties"></a>1.9. Fieldset properties</h3>
<div class="paragraph">
<p>A fieldset is a visual grouping of other properties, inside a block that has a title (legend) and optional description.
Fieldsets are rendered as a <code>FieldsetFormElement</code>.
You can postprocess a group of <code>ViewElement</code> instances and move them manually to a <code>FieldsetFormElement</code>, or you can set a fieldset as the <code>ViewElementMode</code> for a property.</p>
</div>
<div class="paragraph">
<p>In the latter, because a fieldset is a collection of other properties, you will need to specify which properties make up the fieldset.
Specifying the properties of fieldset is done by setting the <code>EntityAttributes.FIELDSET_PROPERTY_SELECTOR</code> to a valid <code>EntityPropertySelector</code>.</p>
</div>
<div class="paragraph">
<p>The following is an example of manually adding a fieldset property to a form, and moving some properties to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">entities.withType( WebPage.class )
        .createOrUpdateFormView( fvb -&gt; fvb
                <span class="comment">/**
                 * First create a new property that is a fieldset
                 * of the existing url and urlGenerated properties.
                 * We add this property only to the scope of the
                 * create or update form view.
                 */</span>
                .properties( props -&gt; props
                        .property( <span class="string"><span class="delimiter">&quot;</span><span class="content">url-settings</span><span class="delimiter">&quot;</span></span> )
                        .displayName( <span class="string"><span class="delimiter">&quot;</span><span class="content">URL settings</span><span class="delimiter">&quot;</span></span> )
                        .viewElementType( ViewElementMode.FORM_WRITE, BootstrapUiElements.FIELDSET )
                        .attribute(
                                EntityAttributes.FIELDSET_PROPERTY_SELECTOR,
                                EntityPropertySelector.of( <span class="string"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">urlGenerated</span><span class="delimiter">&quot;</span></span> )
                        )
                )
                <span class="comment">/**
                 * Because url and urlGenerated are direct members
                 * of WebPage, we need to ensure they are not rendered
                 * directly anymore, so we remove them from the form view.
                 * The new url-settings property will be selected by default
                 * and in turn will render the url and urlGenerated properties.
                 *
                 * If we were to configure the url-settings property as hidden,
                 * we would have to explicitly include it in the form view as well.
                 * That would probably be a preferred approach if we have defined
                 * url-settings in the global property registry for WebPage.
                 */</span>
                .showProperties( <span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">~url</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">~urlGenerated</span><span class="delimiter">&quot;</span></span> )
        )</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties mapped to an <code>@Embedded</code> type will automatically be mapped as a fieldset type.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="customizing-entity-validation"><a class="anchor" href="#customizing-entity-validation"></a>1.10. Customizing entity validation</h3>
<div class="paragraph">
<p>By default annotation validation is performed on all entities.
Customizing validation can be done by simply specifying a <code>Validator</code> bean that supports the specific entity type.
You can use the <code>EntityValidatorSupport</code> as a base class to extend the default annotation based entity validation.</p>
</div>
<div class="paragraph">
<p>If more than one <code>Validator</code> could be applied, you will manually have to set the <code>Validator.class</code> attribute on the <code>EntityConfiguration</code> to the correct one.</p>
</div>
</div>
<div class="sect2">
<h3 id="customizing-strong-value-strong-mode-elements"><a class="anchor" href="#customizing-strong-value-strong-mode-elements"></a>1.11. Customizing <strong>VALUE</strong> mode elements</h3>
<div class="paragraph">
<p>The <code>ViewElementMode.VALUE</code> and <code>ViewElementMode.LIST_VALUE</code> are the defaults to provide the output of a property for readonly views.
Unless a specific <code>ViewElement</code> is configured, this will always be a <code>String</code> output of the property.
By default the <strong>mvcConversionService</strong> will be used to convert the property value if no type specific builder is provided.</p>
</div>
<div class="paragraph">
<p>Apart from providing a custom <code>ViewElement</code> you can also modify the rendered output by providing attributes on the <code>EntityPropertyDescriptor</code>.
If you provide a <code>org.springframework.format.Printer.class</code> attribute, that implementation will be used for printing the text value.
Alternatively you can provide a <code>java.text.Format.class</code> attribute to be used.
Note that most default <code>Format</code> implementations are not thread-safe, in that case you should wrap them in a <code>SynchronizedFormat</code> instance.</p>
</div>
<div class="paragraph">
<p>All standard view elements will use the <code>Printer</code> or <code>Format</code> attribute if one of them is present, instead of the default.
A <code>Printer</code> attribute takes precedence over a <code>Format</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="customizing-textbox-elements"><a class="anchor" href="#customizing-textbox-elements"></a>1.12. Customizing textbox elements</h3>
<div class="paragraph">
<p><code>TextboxFormElement.Type</code> can be set as an attribute on the <code>EntityPropertyDescriptor</code>.
If set and the property is generated as a <code>TextboxFormElement</code>, that type will be used.</p>
</div>
<div class="paragraph">
<p>You can add default post processors to the <code>TextboxFormElementBuilderFactory</code> to customize the autodetection.</p>
</div>
</div>
<div class="sect2">
<h3 id="customizing-numeric-elements"><a class="anchor" href="#customizing-numeric-elements"></a>1.13. Customizing numeric elements</h3>
<div class="paragraph">
<p>By default all <code>Number</code> type properties will result in a <code>NumericFormElement</code> being used which is rendered as a textbox.
The behavior can be customized by providing a <code>NumericFormElementConfiguration</code>.
A default configuration will only be created for properties annotated with a Spring <code>@NumberFormat</code> for type <code>CURRENCY</code> or <code>PERCENT</code>, if no <code>NumericFormElementConfiguration.class</code> or <code>NumericFormElementConfiguration.Format.class</code> attribute is present.</p>
</div>
<div class="paragraph">
<p>If a <code>NumericFormElementConfiguration</code> is present a more advanced javascript control will be used in the front-end for value input.
The same configuration will also be used for rendering the <strong>VALUE</strong> mode elements, formatting the output according to the properties configured.</p>
</div>
<div class="paragraph">
<div class="title">Manually configuring percent</div>
<p>Put a format attribute with value <code>PERCENT</code> on the <code>EntityPropertyDescriptor</code>.
This will create a locale specific percentage format with 2 decimals (unless the property type is integer).
Alternatively use the static <code>NumericFormElementConfiguration.percent()</code> factory method to quickly create a localizable format suitable for percentages.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you use Spring number format for <code>PERCENT</code> then 1 is expected to match 100%.
If you manually create a <code>NumericFormElementConfiguration</code> it expects 100 to match with 100%.
You can modify this behavior by setting the <code>multiplier</code> property on the configuration.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Manually configuring currency</div>
<p>The easiest way to configure a currency is to set a <code>Currency.class</code> attribute for the property.
In that case a locale specific format for that currency will be created.
Alternatively the same options as for percentages can be used and there is a <code>NumericFormElementConfiguration.currency()</code> factory method available.</p>
</div>
</div>
<div class="sect2">
<h3 id="customizing-datetime-picker-elements"><a class="anchor" href="#customizing-datetime-picker-elements"></a>1.14. Customizing datetime picker elements</h3>
<div class="paragraph">
<p>By default all <code>Date</code> properties will result in a <code>DateTimeFormElement</code> which is rendered as a date time picker.
The form element can be customized through the <code>DateTimeFormElementConfiguration</code> class.
The default configuration is determined based on the presence of <code>@Temporal</code> annotations on the property.
The date picker supports 3 major modes: <strong>date</strong>, <strong>time</strong> and <strong>timestamp</strong> (date + time) with minutes being the maximum resolution.
The presence of <code>@Past</code> and <code>@Future</code> validation annotations will additionally restrict the dates that are selectable.</p>
</div>
<div class="paragraph">
<p>A specific date picker format can easily be specified by putting a <code>DateTimeFormElementConfiguration.Format</code> attribute.
Advanced customization can be done by setting a complete <code>DateTimeFormElementConfiguration</code> as attribute.
Dynamic configuration (for example setting the first selectable date relative to the current date) can only be done by specifying a <code>DateTimeFormElementBuilder</code> manually and adding a custom post processor that modifies the <code>DateTimeFormElementConfiguration</code>.
A <code>DateTimeFormElementConfiguration</code> is always duplicated when creating an element so it is safe for post processors to modify the instance.</p>
</div>
<div class="paragraph">
<div class="title">Using dates with <code>TemporalType.TIME</code> and JPA</div>
<p>A property of type <code>java.util.Date</code> but annotated with <code>@Temporal(TemporalType.TIME)</code> will result in only time selection being available (hours and minutes).
However the <code>@Temporal</code> annotation also influences how JPA will persist the data type.
If your type was created as a timestamp in the database schema, this might result in conversion errors.
With Hibernate you can resolve this by additionally specifying a <code>@Type</code> annotation forcing the type to be persisted as timestamp.</p>
</div>
<div class="listingblock">
<div class="title">Example of a required time property that is written as a date relative to start of epoch time in the database</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@NotNull</span>
<span class="annotation">@Column</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">arrival_time</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Temporal</span>(TemporalType.TIME)
<span class="annotation">@Type</span>( type = <span class="string"><span class="delimiter">&quot;</span><span class="content">timestamp</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> <span class="predefined-type">Date</span> arrivalTime;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="customizing-selectable-options"><a class="anchor" href="#customizing-selectable-options"></a>1.15. Customizing selectable options</h3>
<div class="paragraph">
<p>Any entity or enum property will by default be rendered via an <code>OptionsFormElementBuilder</code> resulting in either a select box or list of checkboxes being rendered.</p>
</div>
<div class="paragraph">
<div class="title">Set the type of options control</div>
<p>You can customize the type of options control to be generated by setting the <em>viewElementType</em> for a property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">entities.withType( WebPage.class )
    .createOrUpdateFormView( fvb -&gt; fvb
        <span class="comment">/**
         * Render the state as radio buttons instead of a select box.
         */</span>
        .properties( props -&gt; props
            .property( <span class="string"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span> )
            .viewElementType( ViewElementMode.CONTROL, BootstrapUiElements.RADIO )
        )
    );</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no <em>viewElementType</em> has been specified, a default type will be determined: a select box will be used in case of a single value, a checkbox list in case of multiple values.</p>
</div>
<div class="paragraph">
<div class="title">Advanced select box configuration</div>
<p>A select control being generated will be a <a href="https://silviomoreto.github.io/bootstrap-select/">bootstrap-select</a> with default configuration.
You can customize the select box configuration by manually setting a <code>SelectFormElementConfiguration</code> attributes.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://across-docs.foreach.be/across-standard-modules/BootstrapUiModule/2.0.0-SNAPSHOT/reference">BootstrapUiModule documentation</a> for all configurable properties.</p>
</div>
<div class="paragraph">
<p>If no <em>viewElementType</em> has been specified, but a <code>SelectFormElementConfiguration</code> attribute is present, the resulting control will be a select box.</p>
</div>
<div class="paragraph">
<div class="title">Configuring options that can be selected</div>
<p>You can manipulate the options that can be selected in several ways by setting either <code>EntityConfiguration</code> or <code>EntityPropertyDescriptor</code> attributes.</p>
</div>
<div class="paragraph">
<p>If your property is another entity type, by default the selectable options will be all entities of that type.
If you want to change this for all properties of that type, you can set either an <code>OptionGenerator.class</code>, <code>OptionIterableBuilder.class</code> or <code>EntityAttributes.OPTIONS_ENTITY_QUERY</code> attribute on the target <code>EntityConfiguration</code>.
If you want to change it only for a single property, you can configure the same attributes on the <code>EntityPropertyDescriptor</code> of that property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">entities.withType( WebCmsArticle.class )
    .createOrUpdateFormView( fvb -&gt; fvb
        <span class="comment">/**
         * Only allow published sections to be selectable,
         * by specifying an EQL statement to fetch them.
         */</span>
        .properties( props -&gt; props
            .property( <span class="string"><span class="delimiter">&quot;</span><span class="content">section</span><span class="delimiter">&quot;</span></span> )
            .attribute( EntityAttributes.OPTIONS_ENTITY_QUERY, <span class="string"><span class="delimiter">&quot;</span><span class="content">published = TRUE ORDER BY name ASC</span><span class="delimiter">&quot;</span></span> )
        )
    );</code></pre>
</div>
</div>
<div class="paragraph">
<p>When dealing with an enum type, you can also configure the <code>EntityAttributes.OPTIONS_ALLOWED_VALUES</code> with the `EnumSet`of selectable options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">/**
 * Limit the selectable enum HTTP status.
 */</span>
entities.withType( WebCmsUrl.class )
    .properties(
        props -&gt; props
            .property( <span class="string"><span class="delimiter">&quot;</span><span class="content">httpStatus</span><span class="delimiter">&quot;</span></span> )
            .attribute(
                EntityAttributes.OPTIONS_ALLOWED_VALUES,
                <span class="predefined-type">EnumSet</span>.of( HttpStatus.OK, HttpStatus.NOT_FOUND )
            )
    );</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Depending on the attribute you will change more of the default behaviour and will have to provide custom implementations.
Use the most appropriate attribute for your use case.
See the <a href="#appendix-entity-configuration-attributes">appendix for more information on the different attributes</a>.
:!sectnums:
</td>
</tr>
</table>
</div>
</div>
<h1 id="configuring-entity-types" class="sect0"><a class="anchor" href="#configuring-entity-types"></a>Configuring entity types</h1>
<div class="sect2">
<h3 id="builders"><a class="anchor" href="#builders"></a>1.1. Using builders</h3>
<div class="paragraph">
<p>Entities are usually automatically added to the <code>EntityRegistry</code> through the use of one or more <code>EntityRegistrar</code> beans.
The registrars will apply a default configuration, usually consisting of all properties, associations and views.</p>
</div>
<div class="paragraph">
<p>Customizing the <code>EntityRegistry</code> is done by implementing one or more <code>EntityConfigurer</code> beans in your modules.
These receive an <code>EntitiesConfigurationBuilder</code> that effectively allows you to customize all registered <code>EntityConfiguration</code> instances.
Multiple <code>EntityConfigurer</code> beans can modify the same <code>EntityConfiguration</code>, the order in which they are applied will determine the last value if they modify the same properties.</p>
</div>
<div class="paragraph">
<p>Investigate the javadoc of the <code>EntitiesConfigurationBuilder</code> and child builders to discover all possible configuration options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@AcrossDepends</span>(required = <span class="string"><span class="delimiter">&quot;</span><span class="content">EntityModule</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Configuration</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">UserEntitiesConfiguration</span> <span class="directive">implements</span> EntityConfigurer
{
        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="type">void</span> configure( EntitiesConfigurationBuilder configuration ) {
                <span class="comment">// By default permissions cannot be managed through the user interface</span>
                configuration.withType( <span class="predefined-type">Permission</span>.class ).hide();
        }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-properties"><a class="anchor" href="#configuring-properties"></a>1.2. Configuring properties</h3>
<div class="paragraph">
<p>Properties for an entity can be configured through the builders as well.
New properties can be added or the default properties can modified.
How properties are configured determines how they will be rendered on the generated forms.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">hidden</dt>
<dd>
<p>A hidden property will by default not be returned when requesting all properties from an <code>EntityPropertyRegistry</code>.
You can still get this property directly however, the <code>hidden</code> state means a property will not advertise itself, you must know of its existence.</p>
</dd>
<dt class="hdlist1">readable</dt>
<dd>
<p>Any readable property can be rendered in all views.
This state means that a form control can always be generated, even though it might very well be readonly if the property is not <code>writable</code>.</p>
</dd>
<dt class="hdlist1">writable</dt>
<dd>
<p>A writable property can be rendered in form views.
In case a property is writable but not readable, the property can only be included in forms but not in other views.</p>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The <code>hidden</code> state has no correlation with a hidden form control.
Setting a property to be rendered as a hidden form control can only be done through configuring the right <code>ViewElement</code> information for that property.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="configuring-a-label"><a class="anchor" href="#configuring-a-label"></a>1.2.1. Configuring a label</h4>
<div class="paragraph">
<p>An entity with a corresponding <code>EntityConfiguration</code> always has a label, this is a textual representation of the entity in for example lists.
This could be the <strong>name</strong> or the * title* property for example.
By default the label corresponds to a custom generated property <strong>#label</strong> that defaults to calling <code>toString()</code> on the entity.</p>
</div>
<div class="paragraph">
<p>You can configure the label using the <code>label()</code> method on a <code>PropertyDescriptorBuilder</code>.
This is equivalent to calling <code>property("#label")</code>.
If you want to use another property as the base for label generation, you can configure this on the <code>EntityConfigurationBuilder</code> by calling <code>label("propertyName")</code>.
This will copy all settings from the source property to the <strong>#label</strong> property, but keep in mind it still is a separate property that can be customized.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> configure( EntitiesConfigurationBuilder entities ) {
    <span class="comment">// Configure the username to be used as label for a User entity</span>
    entities.withType( User.class ).label( <span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> );

    <span class="comment">// Configure the group name to be used as base label, but modify the value fetcher so</span>
    <span class="comment">// the label is prefixed with Group</span>
    entities.withType( <span class="predefined-type">Group</span>.class )
            .properties( props -&gt; props.label( <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> ).spelValueFetcher( <span class="string"><span class="delimiter">&quot;</span><span class="content">'Group: ' + name</span><span class="delimiter">&quot;</span></span> ) );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you do not wish to use the <strong>#label</strong> property at all as default entity label, you can customize the <code>Printer</code> used for label generation by modifying the <code>EntityModel</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As <strong>#label</strong> is a generated property, sorting is not enabled by default.
If you configure the label using an existing property, the sortable attribute will be copied as well and sorting on label will be possible.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-an-entityconfiguration-manually"><a class="anchor" href="#creating-an-entityconfiguration-manually"></a>1.3. Creating an EntityConfiguration manually</h3>
<div class="sect3">
<h4 id="attributes-to-configure"><a class="anchor" href="#attributes-to-configure"></a>1.3.1. Attributes to configure</h4>
<div class="paragraph">
<p>Some attributes are mandatory, others are optional but will often impact how much functionality is available out of the box.
You can configure any attribute you like, see the section on <a href="#automatic-attributes">automatic registration</a> for a list of common attributes provided by other registrars.</p>
</div>
</div>
<div class="sect3">
<h4 id="entityqueryexecutor"><a class="anchor" href="#entityqueryexecutor"></a>1.3.2. EntityQueryExecutor</h4>
<div class="paragraph">
<p>In order for generated views to work automatically, an <code>EntityConfiguration</code> should have an <code>EntityQueryExecutor</code> attribute.
The <code>EntityQueryExecutor</code> is a generic interface that supports the simple <code>EntityQuery</code> abstraction for fetching entities from the backing repository.
Default implementations exist for <code>JpaSpecificationExecutor</code> and <code>QueryDslPredicateExecutor</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="registering-an-enum-as-entity"><a class="anchor" href="#registering-an-enum-as-entity"></a>1.3.3. Registering an ENUM as entity</h4>
<div class="paragraph">
<p>EntityModule supports registration of enums as <code>EntityConfiguration</code>.
When creating an <code>EntityConfiguration</code> for an enum, a basic <code>EntityModule</code> will get built and all enum properties will be configurable.</p>
</div>
<div class="paragraph">
<p>Registering enums as entity is mainly useful for configuration of display properties in related entity views.</p>
</div>
<div class="listingblock">
<div class="title">Example registering an enum as entity</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Enum class</span>
<span class="directive">public</span> <span class="type">enum</span> Country
{
    BE( <span class="string"><span class="delimiter">&quot;</span><span class="content">Belgium</span><span class="delimiter">&quot;</span></span> ),
    UK( <span class="string"><span class="delimiter">&quot;</span><span class="content">United Kingdom</span><span class="delimiter">&quot;</span></span> ),
    NL( <span class="string"><span class="delimiter">&quot;</span><span class="content">Netherlands</span><span class="delimiter">&quot;</span></span> );

    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    Country( <span class="predefined-type">String</span> name ) {
        <span class="local-variable">this</span>.name = name;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
        <span class="keyword">return</span> name;
    }
}

<span class="comment">// Create the EntityConfiguration</span>
<span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> configure( EntitiesConfigurationBuilder entities ) {
    entities.create().entityType( Country.class, <span class="predefined-constant">true</span> ).label( <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> );
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="automatic-registration-of-entity-types"><a class="anchor" href="#automatic-registration-of-entity-types"></a>1.4. Automatic registration of entity types</h3>
<div class="sect3">
<h4 id="spring-data-repositories"><a class="anchor" href="#spring-data-repositories"></a>1.4.1. Spring Data repositories</h4>
<div class="sect4">
<h5 id="jpa-repositories"><a class="anchor" href="#jpa-repositories"></a>JPA repositories</h5>
<div class="paragraph">
<p>DOCUMENTATION TODO:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Embedded ID</p>
</li>
<li>
<p>register conversion service</p>
</li>
<li>
<p>add json serializer</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="automatic-attributes"><a class="anchor" href="#automatic-attributes"></a>Automatic attribute registration</h5>
<div class="paragraph">
<p>See the appendix for an <a href="#appendix-entity-configuration-attributes">overview of commonly registered attributes</a>.</p>
</div>
</div>
</div>
</div>
<h1 id="entity-query-infrastructure" class="sect0"><a class="anchor" href="#entity-query-infrastructure"></a>EntityQuery infrastructure</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>EntityModule provides an abstraction layer for querying entities.
This abstraction is built around the concept of an <code>EntityQuery</code>.</p>
</div>
<div class="paragraph">
<p>This chapter gives some insight in the setup and how to customize if so wanted.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="entity-query-executor"><a class="anchor" href="#entity-query-executor"></a>1. EntityQueryExecutor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>EntityQueryExecutor</code> is responsible for executing an <code>EntityQuery</code> and returning the entities requested.
An <code>EntityConfiguration</code> can have a single <code>EntityQueryExecutor.class</code> attribute holding the executor instance.</p>
</div>
<div class="paragraph">
<p>Default implementations exist for <code>JpaSpecificationExecutor</code> and <code>QueryDslPredicateExecutor</code>.
This means that any entity configurations having a repository of this type will get an <code>EntityQueryExecutor</code> created automatically.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Since the <code>EntityQueryExecutor</code> is backed by a specific repository implementation, supported functionality also depends on the actual backing repository.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The presence of the <code>EntityQueryExecutor</code> is a requirement for the default <a href="#entity-views">entity views</a>.</p>
</div>
<div class="sect2">
<h3 id="associatedentityqueryexecutor"><a class="anchor" href="#associatedentityqueryexecutor"></a>1.1. AssociatedEntityQueryExecutor</h3>
<div class="paragraph">
<p>Like <code>EntityQueryExecutor</code> that is registered on the <code>EntityConfiguration</code>, every <code>EntityAssociation</code> can have an <code>AssociatedEntityQueryExecutor</code> registered.
The <code>AssociatedEntityQueryExecutor</code> allows executing queries in the context of a single parent object.</p>
</div>
<div class="paragraph">
<p>Like the <code>EntityQueryExecutor</code>, the <code>AssociatedEntityQueryExecutor</code> is usually added automatically.</p>
</div>
<div class="paragraph">
<p>The presence of the <code>AssociatedEntityQueryExecutor</code> is a requirement for the default association <a href="#entity-views">entity views</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="entity-query-language-eql"><a class="anchor" href="#entity-query-language-eql"></a>2. EntityQuery Language (EQL)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apart from building an <code>EntityQuery</code> in code, one can be specified using the EntityQuery Language (EQL).
EQL provides an SQL-like syntax for building queries.  Some examples could be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name = 'john'</code></p>
</li>
<li>
<p><code>order by birthday asc</code></p>
</li>
<li>
<p><code>name = 'john' order by birthday desc, registrationDate asc</code></p>
</li>
<li>
<p><code>name = 'john' and birthday &gt;= '1980-01-01'</code></p>
</li>
<li>
<p><code>(name in ('john', 'jane') and birthday = today()) or birthday is EMPTY order by name asc</code></p>
</li>
<li>
<p><code>children contains 'john' or children is EMPTY</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A single clause of a query consists of a <em>field</em>, followed by an <em>operator</em>, followed by one or more <em>values</em> or <em>functions</em>.
Multiple <em>values</em> for one field are grouped together inside parentheses.
Clauses can be combined using either <em>and</em> or <em>or</em>.
Operator precedence can be enforced by using parentheses around a clause.</p>
</div>
<div class="paragraph">
<p>A <em>field</em> of a query clause usually corresponds with a single property you want to query.</p>
</div>
<div class="paragraph">
<p>A SQL-like <em>order by</em> clause specifying one or more properties is also supported.
An EQL statement with only an ordering clause will select all items in that order.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Special characters in string literals should be escaped using the \\ (backslash) character.
In case of like conditions, they should be double-escaped.</p>
</div>
</blockquote>
</div>
<div class="sect2">
<h3 id="supported-operators"><a class="anchor" href="#supported-operators"></a>2.1. Supported operators</h3>
<div class="sect3">
<h4 id="equality-operators"><a class="anchor" href="#equality-operators"></a>2.1.1. Equality operators</h4>
<div class="paragraph">
<p>Usable on most property types.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">equals</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>!=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not equals</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="in-not-in"><a class="anchor" href="#in-not-in"></a>2.1.2. IN/NOT IN</h4>
<div class="paragraph">
<p>Usable on most property types.
These are the only operators that take a group of values as argument.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">equal to any of the argument values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOT IN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not equal to any of the argument values</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="comparing-operators"><a class="anchor" href="#comparing-operators"></a>2.1.3. Comparing operators</h4>
<div class="paragraph">
<p>Usable on numeric and date property types.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>&gt;</code></th>
<th class="tableblock halign-left valign-top">greater than</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">greater than or equal to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">less than</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8656;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">less than or equal to</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="like-operators"><a class="anchor" href="#like-operators"></a>2.1.4. LIKE operators</h4>
<div class="paragraph">
<p>Usable on string property types.
The argument specifies the pattern that property value should match.
The pattern can contain simple wildcard specified using <strong>%</strong>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LIKE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">should match the pattern specified as argument</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOT LIKE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">should not match the pattern specified as argument</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ILIKE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">case insensitive match of the pattern specified as argument</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOT ILIKE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">should not match the pattern specified as argument (case insensitive)</p></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>NOTE</strong>
Special characters in LIKE statements should be double-escaped using the \ (backslash) character.
This includes the literal % (percentage) character.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><strong>Case insensitive property matching</strong>
When using <strong>ILIKE</strong> conditions, a case insensitive lookup will be performed in the datastore.
If you want to force a property to always have a case insensitive lookup, you can do so by configuring a <code>EntityQueryConditionTranslator</code> attribute on that property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">configuration
 .withType( <span class="predefined-type">Group</span>.class )
 .properties(
    props -&gt; props.property( <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> ).attribute( EntityQueryConditionTranslator.class, EntityQueryConditionTranslator.ignoreCase() )
 )</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will convert any equality or like operator to the equivalent case insensitive lookup.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>WARNING</strong>
Whenever possible, it is probably best to use collation settings of your datastore to ensure case insensitive querying of properties.  Configuring it on a datastore level will almost certainly give you much better performance.  If collation is not possible, investigate the option of using function indices on the relevant columns.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="contains-not-contains"><a class="anchor" href="#contains-not-contains"></a>2.1.5. CONTAINS/NOT CONTAINS</h4>
<div class="paragraph">
<p>Usable on collection or text property types.
In case of text the contains statement is translated to a like statement with wildcards before and after.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONTAINS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">argument should be present in the collection or string should be present in the text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOT CONTAINS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">argument should not be present in the collection or string should not be present in the text</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="is-null-is-not-null"><a class="anchor" href="#is-null-is-not-null"></a>2.1.6. IS NULL/IS NOT NULL</h4>
<div class="paragraph">
<p>Usable on single value properties only.
These operators to not take any additional arguments.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IS NULL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">property should not be set (null)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IS NOT NULL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">property should be set (not null)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="is-empty-is-not-empty"><a class="anchor" href="#is-empty-is-not-empty"></a>2.1.7. IS EMPTY/IS NOT EMPTY</h4>
<div class="paragraph">
<p>Preferred for collection type properties, altough usually will work as an alternative for <code>IS NULL</code>/<code>IS NOT NULL</code> on single value properties.  These operators to not take any additional arguments.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IS EMPTY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">property should not have any members (in case of collection) or should not be set (if single value property)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IS NOT EMPTY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">property should have at least one member (in case of collection) or should be set (if single value property)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="default-eql-functions"><a class="anchor" href="#default-eql-functions"></a>2.2. Default EQL functions</h3>
<div class="paragraph">
<p><strong>Security related functions</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currentUser()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns the name of the current authenticated principal</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Date and time functions</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>now()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns current timestamp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>today()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns date of today</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="entityqueryparser"><a class="anchor" href="#entityqueryparser"></a>2.3. EntityQueryParser</h3>
<div class="paragraph">
<p>The <code>EntityQueryParser</code> is responsible for converting an EQL statement into a valid <code>EntityQuery</code>.
Any entity configuration with an <code>EntityQueryExecutor</code> registered will have an <code>EntityQueryParser</code> created automatically.</p>
</div>
<div class="paragraph">
<p>The parser will validate the EQL statement and convert it to a strongly typed <code>EntityQuery</code>.
The default <code>EntityQueryParser</code> uses the entity related <code>EntityPropertyRegistry</code> to validate the query clauses.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="entity-query-filtering-on-list-view"><a class="anchor" href="#entity-query-filtering-on-list-view"></a>3. EntityQuery filtering on list view</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Any entity configuration having an <code>EntityQueryParser</code> and <code>EntityQueryExecutor</code> can enable an EntityQuery based filter on its list views. This can be done through the <code>entityQueryFilter()</code> method on the `EntityListViewFactoryBuilder.</p>
</div>
<div class="paragraph">
<p>An EntityQuery filter supports 2 different modes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>basic</em> mode allows you to select the property values to filter on using form controls</p>
</li>
<li>
<p><em>advanced</em> mode give you a textbox for entering any EQL statement to use as filter</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default only advanced mode is active. Basic mode is activated if you configure the properties that should be shown in the filter. You do so by modifying the <code>EntityQueryFilterConfiguration</code> that is being used.</p>
</div>
<div class="paragraph">
<p><strong>Activating the default (advanced mode) EntityQuery filter</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">entities.withType( <span class="predefined-type">Group</span>.class )
        .listView( lvb -&gt; lvb.entityQueryFilter( <span class="predefined-constant">true</span> ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Activating basic mode + advanced mode EntityQuery filter</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">entities.withType( <span class="predefined-type">Group</span>.class )
        .listView( lvb -&gt; lvb.entityQueryFilter( <span class="predefined-constant">true</span> )
                             .showProperties( <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">active</span><span class="delimiter">&quot;</span></span> ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default both basic and advanced mode are available, and the UI allows switching between them. All options are configurable on the <code>EntityQueryFilterConfiguration</code>.</p>
</div>
<div class="sect2">
<h3 id="basic-mode"><a class="anchor" href="#basic-mode"></a>3.1. Basic mode</h3>
<div class="paragraph">
<p>Basic mode enables the use of controls to filter by and will parse the content of the property controls to a valid EQL statement which will then be submitted.</p>
</div>
<div class="paragraph">
<p>By default the following controls will be created - depending on property type:
* textbox controls
* select controls</p>
</div>
<div class="paragraph">
<p>For select controls, you can specify if multiple values can be selected on the <code>EntityQueryFilterConfiguration</code>.</p>
</div>
<div class="paragraph">
<p>Text controls will by default use the <code>EntityQueryOps.CONTAINS</code> operand, multi value controls will use the <code>EntityQueryOps.IN</code> operand and otherwise the <code>EntityQueryOps.EQ</code> operand will be used if none was specified on the property directly.</p>
</div>
<div class="paragraph">
<p>For easier switching between basic and advanced mode, it is also possible to define an <code>EntityAttribute.OPTIONS_ENHANCER</code> on the property, which allows to define the value to be used for the object (e.g. instead of the id of a group, i&#8217;d like to see the name of the group whilst filtering). An <code>EntityQueryValueEnhancer</code> however merely defines a label to use. For the statement to be parsed successfully you will also need to register a corresponding <code>Converter</code> on the <code>ConversionService</code>.</p>
</div>
<div class="paragraph">
<p>The values of the filter controls will be set using the <code>EntityQueryRequest</code> and <code>EntityQueryRequestValueFetcher</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="advanced-mode"><a class="anchor" href="#advanced-mode"></a>3.2. Advanced mode</h3>
<div class="paragraph">
<p>Advanced mode enables the use of EQL to filter the current view using a simple textbox. If both advanced and basic mode are allowed, and the EQL statement that was last executed is not convertible to basic mode, basic mode will be disabled.</p>
</div>
<div class="paragraph">
<p><strong>Example EntityQuery filter configuration</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">entities.withType( WebCmsArticle.class )
        .listview(
            lvb -&gt; lvb.entityQueryFilter(
              eqf -&gt; eqf.showProperties(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">articleType</span><span class="delimiter">&quot;</span></span>) <span class="comment">// create a control for title and articleType</span>
                        .multiValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">articleType</span><span class="delimiter">&quot;</span></span>) <span class="comment">// It should be possible to filter on multiple article types</span>
            )
        );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eql-predicate-on-list-view"><a class="anchor" href="#eql-predicate-on-list-view"></a>4. EQL predicate on list view</h2>
<div class="sectionbody">
<div class="paragraph">
<p>List views also support a base predicate to be configured as an EQL statement.
This base predicate will always be applied to the query being executed if it uses the <code>DefaultEntityFetchingViewProcessor</code> or the <code>EntityQueryFilterProcessor</code>.</p>
</div>
<div class="paragraph">
<p><strong>Ensure deleted (flag) items are never shown</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">entities.withType( <span class="predefined-type">Group</span>.class )
        .listView( lvb -&gt; lvb.entityQueryPredicate( <span class="string"><span class="delimiter">&quot;</span><span class="content">deleted = false</span><span class="delimiter">&quot;</span></span> )        );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Like EQL based filtering, this requires the entity configuration to have a valid <code>EntityQueryExecutor</code> infrastructure.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="extending-eql"><a class="anchor" href="#extending-eql"></a>5. Extending EQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>EntityQuery</code> infrastructure provides some hooks you can use to extend the EQL support with application specific methods.</p>
</div>
<div class="sect2">
<h3 id="custom-value-conversion"><a class="anchor" href="#custom-value-conversion"></a>5.1. Custom value conversion</h3>
<div class="paragraph">
<p>When converting an EQL query all value arguments are first converted to an <code>EQType</code> representation before being converted into their respective Java type.
Actual type conversion is then done via the Spring <code>ConversionService</code>.
To create a custom conversion you can simply register a <code>Converter</code> that converts from the relevant <code>EQType</code> to the property type.</p>
</div>
<div class="paragraph">
<p>The following table shows how EQL arguments will be converted to their respective <code>EQType</code>:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument value</th>
<th class="tableblock halign-left valign-top">EQType</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EQValue</code>: name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'name'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EQString</code>: name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(name, 'name')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EQGroup</code></p>
<p class="tableblock"> - <code>EQValue</code>: name</p>
<p class="tableblock"> - <code>EQString</code>: name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">users(name, 'name')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EQFunction</code>: users</p>
<p class="tableblock"> [arguments]</p>
<p class="tableblock">   - <code>EQValue</code>: name</p>
<p class="tableblock">   - <code>EQString</code>: name</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>By default EntityModule registers id-based lookups for all its registered entities.
So supposing you have an entity <code>User</code> with id 1 and you want to query on a property <strong>creator</strong> of type <code>User</code>, the following query would work: <code>creator = 1</code>.</p>
</div>
<div class="paragraph">
<p>When building the <code>EntityQuery</code> the value 1 would be used as the id to find the <code>User</code> instance, and the latter would be used as the argument for the final query.
If we want to replace the custom behavior and allow the user to be specified by username instead, we could easily register a custom converter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">EQValueToUserConverter</span> <span class="directive">implements</span> Converter&lt;EQValue, User&gt;
{
    ...

    <span class="annotation">@Override</span>
    <span class="directive">public</span> User convert( EQValue source ) {
        <span class="keyword">return</span> userRepository.findByUsername( source.getValue() );
    }
}

...

converterRegistry.addConverter( <span class="keyword">new</span> EQValueToUserConverter(...) );</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would allow us to execute the queries like <code>creator = john</code> or  <code>creator in (john, jane)</code>.
Any type-specific converter will take precedence over the defaults.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>NOTE</strong>
The example above would only work if the username can never contain any whitespace.
If it can, then we would have to specify it as a String instead and write a converter for <code>EQString</code> instead of <code>EQValue</code>.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="adding-custom-functions"><a class="anchor" href="#adding-custom-functions"></a>5.2. Adding custom functions</h3>
<div class="paragraph">
<p>An EQL function is represented by a unique name and can optionally take a number of arguments for its execution.
Adding custom functions is as easy as simply defining a <code>@Component</code> that implements the <code>EntityQueryFunctionHandler</code> interface.
All components of this type will be detected and checked when executing an EQL query.</p>
</div>
<div class="paragraph">
<p>The handler will be called with the required contextual data for the return type requested.
If you want to use a function to compare a property that has a <code>Date</code> type, your function should return a <code>Date</code> instance as well.</p>
</div>
<div class="paragraph">
<p>A single handler can support multiple functions and requested return types.</p>
</div>
<div class="paragraph">
<p><strong>Simple EntityQuery function that always returns the String hello</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">/**
 * Simple EntityQuery function that always returns the String 'hello'.
 * Example eql: name = hello() or name in (hello(), 'goodbye')
 */</span>
<span class="annotation">@Component</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloFunction</span> <span class="directive">implements</span> EntityQueryFunctionHandler
{
        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="type">boolean</span> accepts( <span class="predefined-type">String</span> functionName, TypeDescriptor desiredType ) {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>.equals( functionName );
        }

        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="predefined-type">Object</span> apply( <span class="predefined-type">String</span> functionName,
                             EQType<span class="type">[]</span> arguments,
                             TypeDescriptor desiredType,
                             EQTypeConverter argumentConverter ) {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>;
        }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="custom-eql-translation"><a class="anchor" href="#custom-eql-translation"></a>5.3. Custom EQL translation</h3>
<div class="paragraph">
<p>You can register an <code>EntityQueryConditionTranslator</code> attribute on any entity property.
If a translator instance is present, it will be called during the parsing phase of an EQL statement into an <code>EntityQuery</code>.</p>
</div>
<div class="paragraph">
<p><strong>Ensuring a field search is always case insensitive</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">configuration
 .withType( <span class="predefined-type">Group</span>.class )
 .properties(
    props -&gt; props.property( <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> ).attribute( EntityQueryConditionTranslator.class, EntityQueryConditionTranslator.ignoreCase() )
 )</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Define a search text property that actually searches on other fields</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">configuration.withType( Note.class )
             .properties( props -&gt; props.property( <span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> )
                                        .valueFetcher( entity -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> )
                                        .propertyType( TypeDescriptor.valueOf( <span class="predefined-type">String</span>.class ) )
                                        .viewElementType( ViewElementMode.CONTROL, BootstrapUiElements.TEXTAREA )
                                        .attribute( EntityQueryConditionTranslator.class,
                                                    EntityQueryConditionTranslator.expandingOr( <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span> ) )
                                        .hidden( <span class="predefined-constant">true</span> )
                             )</code></pre>
</div>
</div>
</div>
</div>
</div>
<h1 id="appendix" class="sect0"><a class="anchor" href="#appendix"></a>Appendix</h1>
<div class="sect1">
<h2 id="appendix-attributes-overview"><a class="anchor" href="#appendix-attributes-overview"></a>1. Attributes overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some useful (utility) classes for managing attributes for different EntityModule objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>EntityAttributes</code> contains a variation of common attribute constants and some static helper methods</p>
</li>
<li>
<p><code>EntityAttributeRegistrars</code> contains helper registrar factory methods</p>
</li>
<li>
<p><code>EntityViewFactoryAttributes</code> contains common attribute constants and helper methods, specific for entity views</p>
</li>
</ul>
</div>
<h3 id="appendix-entity-configuration-attributes" class="discrete">EntityConfiguration attributes</h3>
<div class="paragraph">
<p>The following table lists commonly present attributes on an <code>EntityConfiguration</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Repository.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In case of an entity registered through a Spring Data repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RepositoryInvoker.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In case of an entity registered through a Spring Data repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RepositoryFactoryInformation.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In case of an entity registered through a Spring Data repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PersistentEntity.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In case of an entity registered through a Spring Data repository that exposed <code>PersistentEntity</code> information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityQueryExecutor.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Holds the <code>EntityQueryExecutor</code> that can be used for <a href="#entity-query-executor">custom <code>EntityQuery</code> execution</a> and will be used by default for fetching entities.
Available if the <code>Repository</code> was supported by one of the <a href="#entity-query-executor">default <code>EntityQueryExecutor</code> implementations</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityQueryParser.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Holds the <code>EntityQueryParser</code> that should be used for <a href="#entity-query-language-eql">parsing EQL statements</a> into a valid <code>EntityQuery</code>.
Available if the <code>EntityQueryExecutor.class</code> attribute is present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityAttributes.TRANSACTION_MANAGER_NAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optionally holds the name of the <code>PlatformTransactionManager</code> that the repository for this entity uses.
EntityModule attempts to detect the transaction manager automatically for every Spring Data repository.
When set, this will enable transaction management for the default create, update and delete views.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OptionGenerator.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set on an <code>EntityConfiguration</code>, this will be the default generator used to create the set of options that can be selected for a property that points to the entity configuration.
If all you want to configure is the list of possible options, set the <code>OptionIterableBuilder.class</code> attribute instead.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OptionIterableBuilder.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set on an <code>EntityConfiguration</code>, this will be the default builder used to create the set of options that can be selected for a property that points to the entity configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityAttributes.OPTIONS_ENTITY_QUERY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set on an <code>EntityConfiguration</code>, contains the EQL statement or <code>EntityQuery</code> that should be used to fetch the selectable options for a property that points to the entity configuration.
Will only be used if there is no <code>OptionGenerator.class</code> or <code>OptionIterableBuilder.class</code> attribute set.</p></td>
</tr>
</tbody>
</table>
<h3 id="appendix-entity-property-descriptor-attributes" class="discrete">EntityPropertyDescriptor attributes</h3>
<div class="paragraph">
<p>The following table lists commonly present attributes on an <code>EntityPropertyDescriptor</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PersistentProperty.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In case of a property of a <code>PersistentEntity</code> registered through a Spring Data repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Sort.Order.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the default <code>Sort.Order</code> if sorting is enabled on this property.
By default strings have an order that ignores case.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityAttributes.CONTROL_NAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional: required to be a <code>String</code> value.
When present this value will be used as the form control name instead of the descriptor name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityAttributes.NATIVE_PROPERTY_DESCRIPTOR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When present holds the Java beans property descriptor that was used to create the <code>EntityPropertyDescriptor</code>.
The presence of this attribute indicates that the property is not artificial but corresponds to an actual Java class property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OptionGenerator.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set on an <code>EntityPropertyDescriptor</code>, this will be the generator used to create the set of options that can be selected for that property.
If all you want to configure is the list of possible options, set the <code>OptionIterableBuilder.class</code> attribute instead.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OptionIterableBuilder.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set on an <code>EntityPropertyDescriptor</code>, this will be the builder used to create the set of options that can be selected for that property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityAttributes.OPTIONS_ENTITY_QUERY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set on an <code>EntityPropertyDescriptor</code>, contains the EQL statement or <code>EntityQuery</code> that should be used to fetch the selectable options for that property.
Will only be used if there is no <code>OptionGenerator.class</code> or <code>OptionIterableBuilder.class</code> attribute set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityAttributes.OPTIONS_ALLOWED_VALUES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only applicable if the property is of an enum type.
When set, the attribute holds the <code>EnumSet</code> of selectable values.
If you want to customize selection of a non-enum type, see the other option related attributes.
Will only be used if there is no <code>OptionGenerator.class</code> or <code>OptionIterableBuilder.class</code> attribute set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SelectFormElementConfiguration.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can hold the configuration instance that should be used when generating a select control for this propery.
Unless a specific <code>ViewElement</code> type has been specified, this will force the control type generated to be a select as well.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityAttributes.PROPERTY_REQUIRED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should be a <code>Boolean</code> value that sets if a control for this property should be marked as required or not.</p></td>
</tr>
</tbody>
</table>
<h3 id="appendix-entity-view-factory-attributes" class="discrete">EntityViewFactory attributes</h3>
<div class="paragraph">
<p>The following table lists commonly present attributes on an <code>EntityViewFactory</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityViewRegistry.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The registry the view belongs to, either the <code>EntityConfiguration</code> or <code>EntityAssociation</code> instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AllowableAction.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If present, holds the <code>AllowableAction</code> that is required for accessing this view.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PersistentEntity.class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In case of an entity registered through a Spring Data repository that exposed <code>PersistentEntity</code> information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityViewFactoryAttributes.VIEW_NAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the view under which it is registered in the <code>EntityViewRegistry</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityViewFactoryAttributes.ADMIN_MENU</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optionally contains a <code>Consumer&lt;EntityAdminMenuEvent&gt;</code> for creating a menu item for that view.
See <code>EntityAttributeRegistrars.adminMenu()</code> variations for helper factory methods.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EntityViewFactoryAttributes.ACCESS_VALIDATOR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optionally contains a <code>BiConsumer&lt;EntityViewFactory, EntityViewContext&gt;</code> that should be used to verify access to the view.
Usually the default <code>EntityViewFactoryAttributes.defaultAccessValidator()</code> is set, which inspects the <code>AllowableAction.class</code> attribute.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="appendix-message-codes"><a class="anchor" href="#appendix-message-codes"></a>2. Message codes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Labels are resolved using a message code hierarchy.
Simply define one or more message sources specifying the properties you want.
Unless custom <code>EntityMessageCodeResolver</code> instances are being used, message codes are generated as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Message code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EntityModule.adminMenu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title of the root menu group for entity management.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>ModuleName</em>.adminMenu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title of the menu group for the entities of that module.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enums.<strong>EnumName</strong>.<strong>EnumValue</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message code for a single enum value label.</p>
<p class="tableblock"> Example: <em>enums.Numbers.ONE</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.name.singular</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label for an entity in singular form, for use outside or at the beginning of a sentence.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.name.singular</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.name.plural</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label for an entity in plural form, for use outside or at the beginning of a sentence.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.name.plural</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.name.singular.inline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label for an entity in singular form, for use within a sentence.
 If not explicitly specified, the label is generated based by lower-casing the non-inline version.</p>
<p class="tableblock">Example: UserModule.entities.user.name.singular.inline_</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.name.plural.inline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label for an entity in plural form, for use within a sentence.
If not explicitly specified, the label is generated based by lower-casing the non-inline version.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.name.plural.inline</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.properties.<strong>propertyName</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label for a single entity property.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.properties.username</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.properties.<strong>propertyName</strong>[description]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description text for a property.
Used by default for form groups and fieldsets in a writable form configuration.
If not empty, description text will be added before the control in a form group, and above the content of a fieldset.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.properties.username[description]</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.properties.<strong>propertyName</strong>[help]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Help text for a property.
Used by default for form groups and fieldsets in a writable form configuration.
If not empty, help text will be added after the control in a form group, and below the content of a fieldset.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.properties.username[help]</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.properties.<strong>propertyName</strong>[tooltip]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tooltip text for a property.
Used by default for form groups and fieldsets in a writable form configuration.
If not empty, the tooltip icon will be added in the label of a form group, and in the legend of a fieldset.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.properties.username[tooltip]</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.properties.<strong>propertyName</strong>[placeholder]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Placeholder text for a property.  Will be used for certain controle like textbox.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.properties.username[placeholder]</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.validation.<strong>validatorKey</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description text for a validation error message.  Optionally can be suffixed with the specific property name.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.validation.NotBlank</em>,  <em>UserModule.entities.user.validation.alreadyExists.username</em></p>
<p class="tableblock">You would then use <em>errors.rejectValue( "username", "alreadyExists" );</em> after creating the above message code in your message sources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.adminMenu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title of the admin menu item for this entity.  Defaults to the singular name of the entity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.adminMenu.general</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the <em>General</em> tab.  Usually the first tab that is also opened when creating a new entity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.adminMenu.<strong>associationName</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the tab for that association.</p>
<p class="tableblock">Example: <em>UserModule.entities.group.adminMenu.user.groups</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.adminMenu.views[<strong>viewName</strong>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the tab for the view with that name (if there is a menu item for that view).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.actions.<strong>actionName</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the actions, usually the buttons or links on a page.
Often you just want to replace these on a global level.</p>
<p class="tableblock">Example: <em>EntityModule.entities.actions.save</em>, <em>UserModule.entities.group.actions.cancel</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.pageTitle.<strong>pageName</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title of the page.
Supports <a href="#message-code-parameters">message code parameters</a>.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.pageTitle.update=Updating {1}: {2}</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.pageTitle.<strong>pageName</strong>.subText</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional text that should be added as sub text (small) to the page header.
 Supports <a href="#message-code-parameters">message code parameters</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.feedback.<strong>feedbackType</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feedback message shown for the given feedback type.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.feedback.validationErrors</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.sortableTable.*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sortable table results and pager text keys.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.sortableTable.resultsFound</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.delete.*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete view specific messages.</p>
<p class="tableblock">Example: <em>UserModule.entities.user.delete.confirmation</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.entityQueryFilter.linkToAdvancedMode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The label for the button to navigate from basic to advanced mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.entityQueryFilter.linkToBasicMode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The label for the button to navigate from advanced to basic mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.entityQueryFilter.eqlPlaceholder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The placeholder for the eql statement filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.entityQueryFilter.searchButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The label for the entity query filter on the search button.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.entityQueryFilter.eqlDescription</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An additional description for the eql statement filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.entityQueryFilter.convertibleToBasicMode[helpText]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The descriptive text that should be shown when hovering over the "basic" mode button when the query is not convertible to basic mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.properties.<strong>propertyName</strong>[filterNotSelected]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label for the empty option in a filter control.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.properties.<strong>propertyName</strong>.value[empty]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label for the empty option of an entity property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.properties.<strong>propertyName</strong>.value[true]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label that should be used instead of <code>true</code> for a boolean property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.properties.<strong>propertyName</strong>.value[false]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label that should be used instead of <code>false</code> for a boolean property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>EntityPrefix</strong>.properties.<strong>propertyName</strong>.value[notSet]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label that should be used for the <code>null</code> option in a filter control.</p></td>
</tr>
</tbody>
</table>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><em>Entity</em> codes are camel cased, eg. <code>CarBrand</code> would become <strong>carBrand</strong></p>
</div>
</blockquote>
</div>
<h3 id="entityprefix" class="discrete">EntityPrefix</h3>
<div class="paragraph">
<p>Every code requested results in several codes being tried with a number of prefixes:
The following prefixes are tried in oder:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>(If association view) <em>ModuleName</em>.entities.<em>sourceEntityName</em>.associations[<em>associationName</em>]</p>
</li>
<li>
<p><em>ModuleName</em>.entities.<em>entityName</em></p>
</li>
<li>
<p>EntityModule.entities.<em>entityName</em></p>
</li>
<li>
<p>EntityModule.entities</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When rendering a view, the default prefix will be appended with a view type prefix as well.
Usually of the form <em>views[viewType]</em>.</p>
</div>
<div class="paragraph">
<p>Example lookup of property "name" on the default list view for entity "user":</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>MyModule.entities.user.views[listView].properties.name</p>
</li>
<li>
<p>MyModule.entities.user.properties.name</p>
</li>
<li>
<p>MyModule.entities.views[listView].properties.name</p>
</li>
<li>
<p>MyModule.entities.properties.name</p>
</li>
<li>
<p>EntityModule.entities.views[listView].properties.name</p>
</li>
<li>
<p>EntityModule.entities.properties.name</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>TIP</strong>: To get a better insight in the message codes generated, use the entity browser in the developer tools.</p>
</div>
<h3 id="message-code-parameters" class="discrete">Message code parameters</h3>
<div class="paragraph">
<p>Some message codes support parameters, if so, the following could be available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>{0}: entity name</p>
</li>
<li>
<p>{1}: entity name inline</p>
</li>
<li>
<p>{2}: label of the entity being modified (if known)</p>
</li>
</ul>
</div>
<h3 id="customizing-message-code-prefix" class="discrete">Customizing message code prefixes</h3>
<div class="paragraph">
<p>The default message code prefix is <code>MODULE_NAME.entities</code>.
It&#8217;s possible to configure the entity message codes that should be used for a specific module through configuration properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">entityModule</span>:
    <span class="key">message-codes</span>:
        <span class="key">MyModule</span>: <span class="string"><span class="content">prefix to use</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can specify multiple prefixes if you want, just realize this will have a big impact on the number of message codes tried.</p>
</div>
<h3 id="debugging-message-code-lookups" class="discrete">Debugging message code lookups</h3>
<div class="paragraph">
<p>You can trace the message codes being resolved by setting the logger named <strong>com.foreach.across.modules.entity.support.EntityMessageCodeResolver</strong> to <em>TRACE</em> level.</p>
</div>
<h3 id="default-message-codes" class="discrete">Default message codes</h3>
<div class="paragraph">
<p>The following is a copy of <strong>EntityModule.properties</strong> which contains the default message codes for EntityModule.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>EntityModule.adminMenu=Entity management

# Default actions
EntityModule.entities.actions.create=Create a new {1}
EntityModule.entities.actions.view=View {1} details
EntityModule.entities.actions.update=Modify {1}
EntityModule.entities.actions.delete=Delete {1}
EntityModule.entities.actions.save=Save
EntityModule.entities.actions.cancel=Cancel

EntityModule.entities.menu.delete=Delete
EntityModule.entities.menu.advanced=Advanced options

EntityModule.entities.buttons.delete=Delete

EntityModule.entities.feedback.entityCreated=New {1} has been created.
EntityModule.entities.feedback.entityUpdated={0} has been updated.
EntityModule.entities.feedback.entityDeleted={0} has been deleted.
EntityModule.entities.feedback.entityDeleteFailed=Exception deleting {1}: {3}.
EntityModule.entities.feedback.validationErrors=Unable to save, please check the form for one or more errors.
EntityModule.entities.feedback.entitySaveFailed=Something went wrong when saving the {1}.  &lt;br /&gt;Error code: &lt;strong&gt;{4}&lt;/strong&gt; ({3}).

EntityModule.entities.pageTitle.create=Create a new {1}
EntityModule.entities.pageTitle.update=Modify {1}: {2}
EntityModule.entities.pageTitle.view=View {1} details: {2}
EntityModule.entities.pageTitle.delete=Delete {1}: {2}

EntityModule.entities.sortableTable.resultsFound={0,choice, 0#No {2}| 1#1 {1}| 1&lt;{0} {2}} found.
EntityModule.entities.sortableTable.pager=Showing page {0,number,#} of {1,number,#}
EntityModule.entities.sortableTable.pager.page=page
EntityModule.entities.sortableTable.pager.ofPages=of
EntityModule.entities.sortableTable.pager.nextPage=next page
EntityModule.entities.sortableTable.pager.previousPage=previous page

EntityModule.entities.delete.confirmation=Are you sure you want to delete this {1} and all its associations?
EntityModule.entities.delete.deleteDisabled=Not possible to delete this {1}.
EntityModule.entities.delete.associations=The following items are associated with this {1}:
EntityModule.entities.delete.associatedResults={2} {1}


# Default validation messages

EntityModule.entities.validation.Size=Length should be between {2} and {1} characters.
EntityModule.entities.validation.Length=Length should be between {2} and {1} characters.
EntityModule.entities.validation.NotBlank=A value is required.
EntityModule.entities.validation.NotNull=A value is required.
EntityModule.entities.validation.NotEmpty=A value is required.
EntityModule.entities.validation.Email=Email address is not well-formed.
EntityModule.entities.validation.Min=Value should be greater than or equal to {1}.
EntityModule.entities.validation.Max=Value should be less than or equal to {1}.

EntityModule.entities.validation.alreadyExists=Another entity already has this value.

# Default control messages
BootstrapUiModule.SelectFormElementConfiguration.noneSelectedText=</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-view-processors"><a class="anchor" href="#appendix-view-processors"></a>3. Default EntityViewProcessors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter lists the general purpose <code>EntityViewProcessor</code> classes that are provided by EntityModule.
The <a href="#entity-views">default entity views</a> are all built on these processors.</p>
</div>
<div class="paragraph">
<p>You can use these manually to assemble a <code>DefaultEntityViewFactory</code>, though some will be configured automatically if you use one of the builders.</p>
</div>
<div class="paragraph">
<p>The class javadoc gives more detailed information.
For a full list of all processors available, see the <a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/package-summary.html">package summary</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/ActionAllowedAuthorizationViewProcessor.html">ActionAllowedAuthorizationViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verifies an the entity configuration or association being requested is not hidden, and a configured <code>AllowableAction</code> is present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/DefaultEntityFetchingViewProcessor.html">DefaultEntityFetchingViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uses the default repository or query fetcher to fetch all items for the current entity view context.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/DefaultValidationViewProcessor.html">DefaultValidationViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registers the default <code>EntityViewCommandValidator</code> and validates the command object if state changing web request (POST, PUT, DELETE, PATCH) is performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/DelegatingEntityFetchingViewProcessor.html">DelegatingEntityFetchingViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetches items using a configured <code>Function</code> or <code>BiFunction</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/EntityPropertyRegistryViewProcessor.html">EntityPropertyRegistryViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registers a custom <code>EntityPropertyRegistry</code> on the view context.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/EntityQueryFilterProcessor.html">EntityQueryFilterProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds an <a href="#entity-query-language-eql">EntityQuery language</a> based filter to a list view.
Adds both the form with textbox and fetches the items based on the form values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/GlobalPageFeedbackViewProcessor.html">GlobalPageFeedbackViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders global feedback on a <code>PageContentStructure</code> (admin page).
 Global feedback is usually added using <code>EntityViewPageHelper</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/ListFormViewProcessor.html">ListFormViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds a default form at the top of a list view.
Optionally add a create button.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/ListPageStructureViewProcessor.html">ListPageStructureViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates the page structure for an entity list view.
Add a page title and publishes the <code>EntityPageStructureRenderedEvent</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/MessagePrefixingViewProcessor.html">MessagePrefixingViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configures custom prefixes that should be used for message code resolving.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/PageableExtensionViewProcessor.html">PageableExtensionViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a <code>Pageable</code> from request parameters and binds it to an <code>EntityViewCommand</code> extension.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/PropertyRenderingViewProcessor.html">PropertyRenderingViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renders a list of properties: allows the properties to be configured as well as the <code>ViewElementMode</code> for rendering.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/SingleEntityFormViewProcessor.html">SingleEntityFormViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a form-based layout for an entity view.
Supports configuring the form grid (defaults to 2 columns), adding default actions (save/cancel) and adding global binding error messages.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/SingleEntityPageStructureViewProcessor.html">SingleEntityPageStructureViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates the page structure for a single entity.
Adds a page title, builds the entity specific menu (renders it as tabs) and publishes the <code>EntityPageStructureRenderedEvent</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/SortableTableRenderingViewProcessor.html">SortableTableRenderingViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates a sortable table for a list of entities.
Allows several configuration options like properties to render, sorting options etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://across-docs.foreach.be/across-standard-modules/EntityModule/3.0.0.RELEASE/javadoc/com/foreach/across/modules/entity/views/processors/TemplateViewProcessor.html">TemplateViewProcessor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configures the name of the template that should be rendered as the result of the controller.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<h1 id="how-tos" class="sect0"><a class="anchor" href="#how-tos"></a>How-tos</h1>
<div class="sect1">
<h2 id="adding-a-custom-property-to-an-entity"><a class="anchor" href="#adding-a-custom-property-to-an-entity"></a>1. Adding a custom property to an entity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To add a custom property to an entity, all we need to do is add the property on the EntityPropertyRegistryBuilder of the entity.</p>
</div>
<div class="paragraph">
<p>In the following example we will add a property named <em>customProperty</em> of the type <code>String</code>, which always returns <em>myCustomString</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> configure( EntitiesConfigurationBuilder configuration ) {
       configuration.withType(MyEntity.class)
                .properties(props -&gt; props.property(<span class="string"><span class="delimiter">&quot;</span><span class="content">customProperty</span><span class="delimiter">&quot;</span></span>)
                           .propertyType(TypeDescriptor.valueOf(<span class="predefined-type">String</span>.class))
                           .valueFetcher(entity -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">myCustomString</span><span class="delimiter">&quot;</span></span>)

                     )
}</code></pre>
</div>
</div>
<h3 id="configuring-the-custom-property-to-expand-it-s-search-to-other-properties" class="discrete">Configuring the custom property to expand it&#8217;s search to other properties</h3>
<div class="paragraph">
<p>To expand the search to other properties, we need to modify the query defined by the custom property.
To do this we can add an a custom <code>EntityQueryConditionTranslator</code> under the <code>EntityQueryConditionTranslator.class</code> attribute.</p>
</div>
<div class="paragraph">
<p>In the following example, we will perform the query of the <em>customProperty</em> on the <em>name</em> and <em>content</em> properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="type">void</span> configure( EntitiesConfigurationBuilder configuration ) {
       configuration.withType(MyEntity.class)
                .properties(props -&gt; props.property(<span class="string"><span class="delimiter">&quot;</span><span class="content">customProperty</span><span class="delimiter">&quot;</span></span>)
                           .propertyType(TypeDescriptor.valueOf(<span class="predefined-type">String</span>.class))
                           .valueFetcher((entity) -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">myCustomString</span><span class="delimiter">&quot;</span></span>)
                           .attribute( EntityQueryConditionTranslator.class,
                                                            condition -&gt; {
                                                                EntityQuery entityQuery = <span class="keyword">new</span> EntityQuery();
                                                                entityQuery.setOperand( EntityQueryOps.OR );
                                                                entityQuery.add(
                                                                        <span class="keyword">new</span> EntityQueryCondition( <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>,
                                                                                                  condition.getOperand(),
                                                                                                  condition.getArguments() ) );
                                                                entityQuery.add(
                                                                        <span class="keyword">new</span> EntityQueryCondition( <span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span>, condition.getOperand(),
                                                                                                  condition.getArguments() ) );
                                                                <span class="keyword">return</span> entityQuery;
                                                            } )

                     )
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="customizing-the-listview-of-an-entity"><a class="anchor" href="#customizing-the-listview-of-an-entity"></a>2. Customizing the listview of an entity</h2>
<div class="sectionbody">
<h3 id="strong-adding-a-custom-action-to-each-item-strong" class="discrete"><strong>Adding a custom action to each item</strong></h3>
<div class="paragraph">
<p>In the case where we want to add a custom action to each instance of our entity on a listview, we have to register a viewprocessor (usually an <code>EntityViewProcessorAdapter</code>) on the listview of its entityconfiguration.
Then in either the <code>createViewElementBuilders `or `render</code> method, we can edit the configured columns of each instance on the listview using the <code>ViewElementBuilderMap</code>.</p>
</div>
<div class="paragraph">
<p>From the <code>ViewElementBuilderMap</code> we can retrieve the <code>SortableTableBuilder</code>, registered under <code>SortableTableRenderingViewProcessor.TABLE_BUILDER</code>, on which we can register additional row processors to edit the content of a row.
Each row represents a single instance of the entity we are configuring.</p>
</div>
<div class="paragraph">
<p>To apply changes to the actions of an instance, we will need to find the actions cell in our row, which is registered under <code>EntityListActionsProcessor.CELL_NAME</code>.</p>
</div>
<div class="paragraph">
<p>In this example, we will add a search button to the actions, which redirects us to google, with the query parameter being the property `name `of the entity instance found on the row.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> createViewElementBuilders(EntityViewRequest entityViewRequest, EntityView entityView, ViewElementBuilderMap builderMap) {
        SortableTableBuilder sortableTableBuilder = builderMap.get(SortableTableRenderingViewProcessor.TABLE_BUILDER, SortableTableBuilder.class);
        sortableTableBuilder.valueRowProcessor((ctx, row) -&gt; {
            ContainerViewElementUtils.find(row, EntityListActionsProcessor.CELL_NAME, TableViewElement.Cell.class).ifPresent(
                    actions -&gt; {
                        MyEntity entity = EntityViewElementUtils.currentEntity(ctx, MyEntity.class);

                        <span class="predefined-type">String</span> searchUrl= UriComponentsBuilder.fromUriString(<span class="string"><span class="delimiter">&quot;</span><span class="content">https://www.google.com/</span><span class="delimiter">&quot;</span></span>)
                                .queryParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">q</span><span class="delimiter">&quot;</span></span>, entity.getName())
                                .toUriString();

                        actions.addFirstChild(
                                BootstrapUiBuilders.button().link()
                                        .iconOnly(<span class="keyword">new</span> GlyphIcon(GlyphIcon.SEARCH))
                                        .url(searchUrl)
                                        .build(ctx)
                        );
                    }
            );

        });

    }</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="howto-extension-form"><a class="anchor" href="#howto-extension-form"></a>3. Creating an extension form</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Creating an additional form view for an entity is a very common action.
Often you want to manage data that does not actually represent entity type properties.
You can attach these to an existing (or separate) form by registering an extension on the <code>EntityViewCommand</code>.</p>
</div>
<div class="paragraph">
<p>Using extensions has the advantage that data binding and default (annotation based) validation will happen automatically.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you add an extension to the default entity form (having the <code>SaveEntityViewProcessor</code>) and the extension has errors upon validation, that will count as global validation and will block saving the entity.
This makes for a very easy way to extend a default properties form with custom behaviour.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this how-to we&#8217;ll show you how to create a custom view with a form backed by a custom model object registered as an extension.
The form will show up as a separate tab on the entities where it&#8217;s registered.</p>
</div>
<h3 id="create-the-extension-class" class="discrete">Create the extension class</h3>
<div class="paragraph">
<p>The extension class is the model for our form and will be validated when the form is submitted.</p>
</div>
<div class="listingblock">
<div class="title">Extension class</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Data</span>
<span class="directive">static</span> <span class="type">class</span> <span class="class">MyExtension</span>
{
    <span class="annotation">@NotBlank</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> url;

    <span class="annotation">@Min</span>(<span class="integer">1980</span>)
    <span class="annotation">@Max</span>(<span class="integer">2000</span>)
    <span class="directive">private</span> <span class="type">int</span> creationYear;
}</code></pre>
</div>
</div>
<h3 id="create-an-entityviewprocessor-for-the-extension" class="discrete">Create an EntityViewProcessor for the extension</h3>
<div class="paragraph">
<p>Render the extension on the form and manage the form data.
Annotation based validation will be done on form POST.</p>
</div>
<div class="listingblock">
<div class="title">ExtensionViewProcessorAdapter implementation</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">/**
 * Custom EntityViewProcessor for MyExtension form.
 * Does not specify an extensionName() but uses the default one (class name),
 * as all processing will be done inside this implementation and there will
 * never be multiple instances of this processor for a single view.
 *
 * Builds a simple form manually.
 * Validation is actually done transparantly using annotation validation.
 * Form elements will show errors because the control names match the extension properties.
 */</span>
<span class="directive">static</span> <span class="type">class</span> <span class="class">MyExtensionViewProcessor</span> <span class="directive">extends</span> ExtensionViewProcessorAdapter&lt;MyExtension&gt;
{
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> MyExtension createExtension( EntityViewRequest entityViewRequest,
                                                EntityViewCommand command,
                                                WebDataBinder dataBinder ) {
        <span class="keyword">return</span> <span class="keyword">new</span> MyExtension();
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doPost( MyExtension extension,
                           BindingResult bindingResult,
                           EntityView entityView,
                           EntityViewRequest entityViewRequest ) {
        <span class="keyword">if</span> ( !bindingResult.hasErrors() ) {
            <span class="comment">// Put a dummy feedback message</span>
            entityViewRequest.getPageContentStructure()
                             .addToFeedback(
                                     BootstrapUiBuilders.alert()
                                        .success()
                                        .dismissible()
                                        .text( <span class="string"><span class="delimiter">&quot;</span><span class="content">Updated url with: </span><span class="delimiter">&quot;</span></span> + extension.getUrl() )
                                        .build()
                             );
        }
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> render( MyExtension extension,
                           EntityViewRequest entityViewRequest,
                           EntityView entityView,
                           ContainerViewElementBuilderSupport&lt;?, ?&gt; containerBuilder,
                           ViewElementBuilderMap builderMap,
                           ViewElementBuilderContext builderContext ) {
        builderMap.get( SingleEntityFormViewProcessor.LEFT_COLUMN, ColumnViewElementBuilder.class )
                  .add(
                          formGroup()
                                  .label( <span class="string"><span class="delimiter">&quot;</span><span class="content">URL</span><span class="delimiter">&quot;</span></span> )
                                  .control( textbox()
                                               .controlName( controlPrefix() + <span class="string"><span class="delimiter">&quot;</span><span class="content">.url</span><span class="delimiter">&quot;</span></span> )
                                               .text( extension.url ) )
                  )
                  .add(
                          formGroup()
                                  .label( <span class="string"><span class="delimiter">&quot;</span><span class="content">Creation year</span><span class="delimiter">&quot;</span></span> )
                                  .control( textbox()
                                               .controlName( controlPrefix() + <span class="string"><span class="delimiter">&quot;</span><span class="content">.creationYear</span><span class="delimiter">&quot;</span></span> )
                                               .text( <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> + extension.creationYear ) )
                  );
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> postRender( MyExtension extension,
                               EntityViewRequest entityViewRequest,
                               EntityView entityView,
                               ContainerViewElement container,
                               ViewElementBuilderContext builderContext ) {
        EntityViewContext entityViewContext = entityViewRequest.getEntityViewContext();

        <span class="comment">// Manually change the cancel button url</span>
        container.find( <span class="string"><span class="delimiter">&quot;</span><span class="content">btn-cancel</span><span class="delimiter">&quot;</span></span>, ButtonViewElement.class )
                 .ifPresent( button -&gt; button.setUrl(
                   entityViewContext.getLinkBuilder().update( entityViewContext.getEntity() )
                 ) );
    }
}</code></pre>
</div>
</div>
<h3 id="register-the-view-with-our-processor" class="discrete">Register the view with our processor</h3>
<div class="paragraph">
<p>The view itself can be registered under any name on the entity configuration.
The view name will be used in the message code resolving.</p>
</div>
<div class="paragraph">
<p>When registering the view, some of the <code>EntityViewCustomizers</code> are used to specify an admin menu item (tab) should be rendered for this view.</p>
</div>
<div class="listingblock">
<div class="title">Register the view</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Use a configuration template for a simple extension form</span>
<span class="comment">// Configure the view to create a menu item under the advanced options</span>
entities.withType( ... )
        .formView(
                <span class="string"><span class="delimiter">&quot;</span><span class="content">extension</span><span class="delimiter">&quot;</span></span>,
                EntityViewCustomizers.basicSettings()
                    .adminMenu( <span class="string"><span class="delimiter">&quot;</span><span class="content">/advanced-options/extension</span><span class="delimiter">&quot;</span></span> )
                    .andThen( EntityViewCustomizers.formSettings().forExtension( <span class="predefined-constant">true</span> ) )
                    .andThen( builder -&gt; builder.viewProcessor( <span class="keyword">new</span> MyExtensionViewProcessor() ) )
        );</code></pre>
</div>
</div>
<h3 id="translate-the-menu-item-title" class="discrete">Translate the menu item title</h3>
<div class="paragraph">
<p>Set the right message code for the specific view menu item.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties"># Default value for every entity with that view
EntityModule.entities.adminMenu.views[extension]=My extension

# Specific title for the menu item on myEntity page
MyModule.entities.myEntity.adminMenu.views[extension]=Extra Fields</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.0.0.RELEASE<br>
Last updated 2018-03-28 15:06:19 CEST
</div>
</div>
</body>
</html>